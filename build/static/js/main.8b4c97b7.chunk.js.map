{"version":3,"sources":["components/Loader.js","public/logothedre.png","public/HomeDemo.png","components/modal/ModalEditHome.js","contexts/Auth.js","views/Home.js","components/quiz/issues.js","components/modal/ModalConfirmation.js","components/quiz/historic.js","components/quiz/method.js","views/Quiz.js","components/Toolbar.js","components/tree/CustomNode.js","components/tree/DebugNode.js","components/modal/tree/ModalEditCritere.js","components/modal/tree/ModalEditEdge.js","components/modal/tree/ModalEditMethod.js","components/modal/tree/ModalEditEndNode.js","components/modal/ModalWarning.js","components/modal/ModalInformation.js","views/Tree.js","components/modal/ModalEditRole.js","components/modal/ModalDeleteUser.js","views/Users.js","public/pdf.svg","public/doc.svg","views/FileUpload.js","components/quiz/DropMethodCard.js","views/Summary.js","public/robotError.svg","components/Warning.js","services/LocalStorage.js","services/AuthApi.js","views/Login.js","views/Register.js","public/quiz.svg","components/Nav.js","public/LogoThedreTitle.png","components/AuthenticatedRoute.js","App.js","reportWebVitals.js","index.js"],"names":["Loader","className","ModalEditHome","props","useState","oldDescription","description","setDescription","closeModal","$","css","close","useEffect","open","title","message","rows","cols","value","onChange","e","target","changeAction","onClick","mainAction","actionButton","closeButton","React","createContext","isAuthenticated","setIsAuthenticated","setUserRole","userRole","Home","modalOpen","setModalOpen","newDescription","setNewDescription","useContext","Auth","history","useHistory","handleOpen","handleClose","url","window","location","protocol","hostname","axios","get","then","response","data","catch","error","console","log","getHomeContent","push","src","demo","alt","icon","faPen","logo","JSON","stringify","put","erreur","Issues","infoOpen","setIsOpen","issue","decisions","Informations","faInfoCircle","Libelle","aria-label","step","action","map","decision","i","ID_Critere_sortant","type","name","id","ID_Decision","htmlFor","checkedBox","val","allChoices","each","this","find","changeData","faChevronRight","ModalConfirmation","component","createElement","mainActionParameters","mainActionName","Historic","selectedElement","setSelectedElement","openModal","element","back","ID","ID_Critere","method","ID_Methode","backOut","historic","length","faUndoAlt","bind","checked","faCheckCircle","Method","setChecked","ressources","setRessources","json","id_methode","Number","post","getRessources","checkedMethod","Description","faUsers","Effectif_preconise","faFolderOpen","Donnees_produites","faClipboard","Type_methode","faChartPie","Type_analyse","Exemple","openFile","Nom","faFilePdf","resumeQuiz","Quiz","nextIssueId","a","editHistoric","setState","checkedDecision","checkMethod","manageMethod","forEach","state","tree","el","restart","addRetainedMethods","manageStoreData","pathname","retainedMethods","criteres","critere","filter","ID_Critere_entrant","oldIssue","currentIssue","currentDecisions","manageHistoric","historicElement","concat","newHistoric","slice","index","indexOf","methodes","methode","currentMethod","Promise","resolve","reject","methods","retainedMethod","backIssue","decisionBeforeMethod","entree","Component","Toolbar","onDragStart","event","nodeType","dataTransfer","setData","effectAllowed","draggable","save","faSave","memo","position","style","background","onConnect","params","label","ModalEditCritere","setCritere","setTitle","selectedCritere","for","placeholder","defaultValue","informations","ModalEditEdge","edge","setEdge","selectedEdge","ModalEditMethod","setMethod","resources","setResources","allResources","setAllResources","selectedMethod","initialTree","methodesRessources","methodeRessources","item","ressource","ID_Ressource","initResources","workforce","productedData","analysis","exemple","selectedFileId","selectedFile","toString","faPlus","Object","keys","keyName","keyIndex","removeFile","faMinusSquare","ModalEditEndNode","endNode","setEndNode","selectedEndNode","ModalWarning","faExclamationTriangle","ModalInformation","Tree","nodeTypes","critereNode","CustomNode","debugNode","DebugNode","colors","setInitialTree","nextId","setNextId","nextEdgeId","setNextEdgeId","nextMethodId","setNextMethodId","elements","setElements","remove","setRemove","errorMessage","setErrorMessage","reactFlowWrapper","useRef","reactFlowInstance","setReactFlowInstance","getMethodId","createNode","newNode","Message","parseInt","es","createEdge","id_source","id_target","color","newEdge","source","arrowHeadType","stroke","initTree","startNode","x","y","firstNode","start","sortie","node","nodeId","splice","getMethod","addClass","removeClass","highest","initEdgesId","initMethodId","initNodeId","alert","modalWarningOpen","setModalWarningOpen","modalInformationOpen","setModalInformationOpen","modalConfirmationOpen","setModalConfirmationOpen","messageConfirmation","setMessageConfirmation","selectedConfirmationElement","setSelectedConfirmationElement","openModalConfirmation","modalEditCritereOpen","setModalEditCritereOpen","setSelectedCritere","modalEditEdgeOpen","setModalEditEdgeOpen","setSelectedEdge","modalEditMethodOpen","setModalEditMethodOpen","setSelectedMethod","modalEditEndNodeOpen","setModalEditEndNodeOpen","setSelectedEndNode","rerenderFlow","cloneElements","ref","flow","toObject","finalTree","transformedElement","transformToCritere","transformToMethod","outDecision","includes","transformToDecision","ID_Entree","transformToEntree","ID_Sortie","transformToSortie","floatingNode","condition","outputEdge","inputEdge","charAt","checkFloatingNode","floatingMethod","checkFloatingMethod","checkTree","onElementsRemove","elementsToRemove","els","removeElements","addEdge","onLoad","onDrop","preventDefault","getData","checkExist","reactFlowBounds","current","getBoundingClientRect","toolbarWidth","width","left","project","clientX","clientY","top","onDragOver","dropEffect","onElementClick","openModalEditCritere","openModalEditMethod","openModalEditEdge","openModalEditEndNode","onPaneClick","faTrashAlt","newData","newResources","thisMethodResources","newResource","newMethodResource","oldResource","ModalEditRole","ModalDeleteUser","Users","delete","users","handleCloseDelete","modalEditOpen","modalDeleteOpen","idUser","currentRole","newRole","componentDidMount","edit","handleCloseEdit","handleClickOpenDelete","handleClickOpenEdit","role","id_utilisateur","listItems","hasOwnProperty","child","handleChange","faUser","faEnvelope","faUserTag","chargeData","FileUpload","file","setFile","allFiles","setAllFiles","loadFiles","getIcon","filename","pdf","doc","html","setMessage","onSubmit","formData","FormData","append","host","headers","Error","uploadFile","faUpload","files","faTrash","DropMethodCard","parentId","currentTarget","parentElement","toggleClass","dropCard","faSortDown","Summary","goToHome","resume","amount","endMessage","Warning","robotError","removeItem","itemToRemove","localStorage","getItem","isUser","token","result","tokenIsValid","jwt_decode","decodeToken","getRole","login","credentials","undefined","localStorageName","newItem","setItem","Date","getTime","Login","username","mot_de_passe","user","setUser","handleSubmit","required","Register","setUsername","mail","setMail","password","setPassword","passwordConfirmation","setPasswordConfirmation","errorPseudo","setErrorPseudo","errorMail","setErrorMail","pseudo","ErrorPseudo","ErrorMail","Nav","to","faHome","quizIcon","faProjectDiagram","faFileUpload","faUserCog","faSignOutAlt","AuthenticatedRoute","path","App","hasAuthenticated","Provider","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8b4c97b7.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nfunction Loader() {    \r\n    return (\r\n        <div className=\"Loader\">\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Loader;\r\n","export default __webpack_public_path__ + \"static/media/logothedre.414fd0b1.png\";","export default __webpack_public_path__ + \"static/media/HomeDemo.db269ae9.png\";","import React, {useEffect, useState} from \"react\";\r\nimport $ from 'jquery';\r\n\r\nfunction ModalEditHome(props) {\r\n    const [description, setDescription] = useState(props.oldDescription);\r\n\r\n    function customFunction() {\r\n        props.mainAction();\r\n        closeModal();\r\n    }\r\n\r\n\r\n    function changeValue(e) {\r\n        setDescription(e.target.value);\r\n        props.changeAction(e.target.value);\r\n\r\n    }\r\n\r\n\r\n    function closeModal() {\r\n        $('.ModalEditHome').css(\"display\", \"none\");\r\n        props.close();\r\n    }\r\n\r\n    function openModal() {\r\n        $('.ModalEditHome').css(\"display\", \"block\");\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            openModal();\r\n        }\r\n    }, [props.open]);\r\n\r\n    return (\r\n        <div className=\"Modal ModalEditHome\">\r\n            <div>\r\n                <h3>{props.title}</h3>\r\n                <p>{props.message}</p>\r\n                <div className=\"container\">\r\n                    <div className=\"text\">\r\n                        <textarea className=\"textinput\" rows=\"16\" cols=\"132\"\r\n                                  value={description} onChange={changeValue}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"action\">\r\n                    <button className=\"button filled\" onClick={customFunction}>{props.actionButton}</button>\r\n                    <button className=\"button outlined\" onClick={closeModal}>{props.closeButton}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalEditHome;\r\n","import React from 'react';\r\n\r\nexport default React.createContext({\r\n    isAuthenticated: false,\r\n    setIsAuthenticated: value =>{},\r\n    setUserRole: value => {},\r\n    userRole: null,\r\n}); ","import Loader from \"../components/Loader\";\r\nimport logo from \"../public/logothedre.png\";\r\nimport demo from \"../public/HomeDemo.png\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faPen} from \"@fortawesome/free-solid-svg-icons\";\r\nimport ModalEditHome from \"../components/modal/ModalEditHome\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport Auth from \"../contexts/Auth\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport $ from 'jquery';\r\n\r\n\r\n/**\r\n * @Goal : Render home, open modal to edit description, call to api to edit\r\n * @UsedByModule : App.js\r\n * @ModuleUsed : Loader, ModalEditHome\r\n * @VisibleVariables :\r\n * @VisibleProcedures :\r\n * @returns {JSX.Element}\r\n */\r\nfunction Home() {\r\n    /**\r\n     * Setup state for role, description, newDescription, modalOpen\r\n     */\r\n    const [description, setDescription] = useState(null);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [newDescription, setNewDescription] = useState(null);\r\n    const {userRole, setUserRole} = useContext(Auth);\r\n    const history = useHistory();\r\n\r\n    /**\r\n     * Call API to update description\r\n     */\r\n    function getHomeContent() {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        if (description === null) {\r\n            axios.get(url + '/API/Controllers/accueil/lire.php')\r\n                .then(response => {\r\n                    setDescription(response.data['description']);\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Effect before render\r\n     */\r\n    useEffect(() => {\r\n        getHomeContent();\r\n    });\r\n\r\n    /**\r\n     * Set boolean modalOpen to true\r\n     */\r\n    function handleOpen() {\r\n        setModalOpen(true);\r\n    }\r\n\r\n    /**\r\n     * Set boolean modalOpen to false\r\n     */\r\n    function handleClose() {\r\n        setModalOpen(false);\r\n    }\r\n\r\n    /**\r\n     * Update newDescription with param description\r\n     * @param description the new description\r\n     */\r\n    function handleChange(description) {\r\n        setNewDescription(description);\r\n    }\r\n\r\n    /**\r\n     * Call to API to edit description\r\n     */\r\n    function edit() {\r\n        if (newDescription !== null) {\r\n            let data = JSON.stringify({description: newDescription});\r\n            let protocol = window.location.protocol;\r\n            let host = window.location.hostname;\r\n            let url = protocol + '//' + host;\r\n            axios.put(url +'/API/Controllers/accueil/modifier.php',data)\r\n                .then(() => {\r\n                    axios.get(url+ '/API/Controllers/accueil/lire.php')\r\n                        .then(response => {\r\n                            setDescription(response.data['description']);\r\n                        })\r\n                        .catch(error => console.log(error))\r\n                    handleClose();\r\n                })\r\n                .catch(function (erreur) {\r\n                    console.log(erreur);\r\n                });\r\n        }\r\n        handleClose();\r\n    }\r\n\r\n    /**\r\n     * Redirect to quiz component\r\n     */\r\n    const redirect = () => {\r\n        history.push('/quiz')\r\n    }\r\n\r\n    /**\r\n     * Return Loader if description is not set\r\n     */\r\n    if (description === null) return (<Loader/>);\r\n    /**\r\n     * Return content if description is set, contains ModalEditHome\r\n     */\r\n    else return (\r\n        <div className=\"Home\">\r\n            <div>\r\n                <div>\r\n                <h1><strong>MATUI</strong>'s tree in digital version</h1>\r\n                    <div className=\"content\">\r\n                        <div>\r\n                            <h3><strong>What is it ?</strong></h3>\r\n                            <p>This application helps you to choose a data production method. It is presented in the form of a questionnaire, and your answers will guide you towards methods that you can choose or not. Each method has associated documents to help you apply it.</p><button className=\"button filled\" onClick={redirect}>Start now</button>\r\n                        </div>\r\n                        <div>\r\n                            <img src={demo} alt={'Tool demo'}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <h3>More explanation\r\n                    {userRole===\"super-admin\"  && ( <FontAwesomeIcon className=\"icon\" icon={faPen} onClick={handleOpen}/>)}\r\n                    {userRole===\"administrator\" && ( <FontAwesomeIcon className=\"icon\" icon={faPen} onClick={handleOpen}/>)}\r\n                </h3>\r\n        \r\n                <div className=\"content\">\r\n                    <div className=\"logo\">\r\n                        <img src={logo} alt={'Logo Thedre'}/>\r\n                    </div>\r\n                    <p>{description}</p>\r\n                </div>\r\n            </div>\r\n            <ModalEditHome\r\n                    title=\"Modify description\"\r\n                    message=\"Please modify\"\r\n                    oldDescription={description}\r\n                    actionButton=\"Confirm\"\r\n                    closeButton=\"Quit\"\r\n                    open={modalOpen}\r\n                    close={handleClose}\r\n                    mainAction={edit}\r\n                    changeAction={handleChange}\r\n                />\r\n        </div>\r\n    );\r\n}\r\nexport default Home;","import React from 'react';\r\nimport $ from 'jquery';\r\nimport Loader from '../Loader'\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faChevronRight, faInfoCircle} from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nfunction Issues(props) {\r\n\r\n    const [infoOpen, setIsOpen] = React.useState(false);\r\n\r\n    function next() {\r\n        setIsOpen(false);\r\n        let checkedBox = $('input:checked').val();\r\n        let allChoices = [];\r\n        $.each($(\"input\"), function () {\r\n            allChoices.push($(this).val());\r\n        });\r\n        if (checkedBox) {\r\n            let decision = props.decisions.find(decision => decision.ID_Decision === checkedBox)\r\n            props.changeData(decision.ID_Critere_sortant, decision, allChoices);\r\n        }\r\n    }\r\n\r\n    function togglePanel() {\r\n        setIsOpen(!infoOpen);\r\n    }\r\n\r\n\r\n    if (props.issue && props.decisions) {\r\n        return (\r\n            <div className=\"Issues\">\r\n\r\n                {props.issue.Informations != null ?\r\n                    <h3><FontAwesomeIcon className=\"issueInfoIcon\" icon={faInfoCircle}\r\n                        onClick={(e) => togglePanel(e)}/> {props.issue.Libelle} </h3>\r\n                    : <h3> {props.issue.Libelle}</h3>}\r\n\r\n                {infoOpen ?\r\n                    <div className=\"content\">\r\n                        <p aria-label={\"info\"}>{props.issue.Informations}</p>\r\n                    </div>\r\n                    : null}\r\n\r\n                <p className=\"step\">Question {props.step}</p>\r\n                <form action=\"#\">\r\n                    {props.decisions.map((decision, i) => {\r\n                        if(decision.ID_Critere_sortant == null){\r\n                            // 0 == end node\r\n                            decision.ID_Critere_sortant = 0;\r\n                        }\r\n                        return (\r\n                            <div key={decision.ID_Decision}>\r\n                                <input type=\"radio\" name=\"radio-group\" id={decision.ID_Decision} value={decision.ID_Decision}/>\r\n                                <label htmlFor={decision.ID_Decision}>{decision.Libelle}</label>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </form>\r\n                <button onClick={next}>Next<FontAwesomeIcon className=\"icon\" icon={faChevronRight}/></button>\r\n            </div>\r\n        );\r\n    } else {\r\n        return <Loader/>\r\n    }\r\n}\r\n\r\nexport default Issues;\r\n","import React, {useEffect} from \"react\";\r\nimport $ from 'jquery';\r\n\r\n/*\r\nParametre obligatoire : \r\n    - title\r\n    - open (bool qui spécifie l'état de la modale)\r\n    - close (function de retour pour gérer l'état de la modal)\r\n    - mainAction (function bind au primary button)\r\n    - mainActionParameter (parametre de cette function => donner un tableau pour plusieurs parametres)\r\n    - mainActionName (nom du button)\r\n\r\nParametre optionnel :\r\n    - message\r\n    - component (permet de bind un component)\r\n*/\r\nfunction ModalConfirmation(props) {  \r\n\r\n    function customFunction(){\r\n        props.mainAction(props.mainActionParameters)\r\n        closeModal();\r\n    }\r\n\r\n    function closeModal(){\r\n        $('.Modal').css(\"display\", \"none\");\r\n        props.close();\r\n    }\r\n\r\n    function openModal(){\r\n        $('.Modal').css(\"display\", \"block\");\r\n    }\r\n\r\n    function buildComponent(){\r\n        return React.createElement(props.component, [props])\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(props.open){\r\n            openModal();\r\n        }\r\n    }, [props.open]);\r\n\r\n\r\n    return (\r\n        <div className=\"Modal ModalConfirmation\">\r\n            <div>\r\n                <h3>{props.title}</h3>\r\n                {props.message &&\r\n                    <p>{props.message}</p>\r\n                }\r\n                {props.component &&\r\n                    buildComponent()\r\n                }\r\n                <div className=\"action\">\r\n                    <button className=\"button filled\" onClick={customFunction}>{props.mainActionName}</button>\r\n                    <button className=\"button outlined\" onClick={closeModal}>Cancel</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalConfirmation;\r\n","import React, {useState} from 'react';\r\n\r\nimport ModalConfirmation from \"../modal/ModalConfirmation\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faUndoAlt, faCheckCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport Loader from '../Loader';\r\nimport Exemple from '../Exemple'\r\n\r\n\r\nfunction Historic(props) {\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [selectedElement, setSelectedElement] = useState(null);\r\n\r\n    function openModal(element) {\r\n        setModalOpen(true);\r\n        setSelectedElement(element)\r\n    }\r\n\r\n    function closeModal(){\r\n        setModalOpen(false);\r\n    }\r\n\r\n    function back(element){\r\n        let ID;\r\n        let type;\r\n        if ('issue' in element) {\r\n            ID = element.issue.ID_Critere;\r\n            type = 'issue';\r\n        }\r\n        if ('method' in element) {\r\n            ID = element.method.ID_Methode;\r\n            type = 'method';\r\n        }\r\n        props.backOut(ID, type);\r\n    }\r\n\r\n    function undo(){\r\n        if(props.historic.length > 1){\r\n            let element = props.historic[props.historic.length - 2];\r\n            back(element);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"Historic\">\r\n            <div className=\"historic-header\">\r\n                <h3>Progression</h3>\r\n                <FontAwesomeIcon onClick={undo} className=\"icon\" icon={faUndoAlt} />\r\n            </div>\r\n            {props.historic ?\r\n                <ul>\r\n                {props.historic.map((element, i) => {   \r\n                        return (\r\n                            <li onClick={openModal.bind(this, element)} key={i}>\r\n                                    <p title={element.issue ? element.issue.Libelle : element.method.Libelle}>{element.issue ? element.issue.Libelle : element.method.Libelle}</p>\r\n                                    {element.decision &&\r\n                                        <p>{element.decision.Libelle}</p>\r\n                                    }  \r\n                                    {element.checked &&\r\n                                        <FontAwesomeIcon className=\"icon\" icon={faCheckCircle} />\r\n                                    }                            \r\n                            </li>\r\n                        ) \r\n                    })}\r\n                </ul>\r\n                : <Loader/>\r\n            }\r\n            <ModalConfirmation\r\n                title=\"Warning\"\r\n                message=\"Do you really want to come back at this step ? Any selected method will be lost.\"\r\n                open={modalOpen}  \r\n                close={closeModal}\r\n                mainAction={back}\r\n                mainActionParameters={selectedElement}\r\n                mainActionName=\"Come Back\"\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Historic;\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faChartPie, faClipboard, faFilePdf, faFolderOpen, faUsers} from '@fortawesome/free-solid-svg-icons'\r\n\r\nfunction Method(props) {\r\n    const [checked, setChecked] = useState(false);\r\n    const [ressources, setRessources] = useState(null);\r\n\r\n    function finish() {\r\n        props.changeData(0);\r\n    }\r\n\r\n    function resume() {\r\n        props.resumeQuiz();\r\n    }\r\n\r\n    function toggleValue(){\r\n        setChecked(!checked);\r\n    }\r\n\r\n\r\n    function getRessources() {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        const json = JSON.stringify({id_methode: Number(props.method.ID_Methode)});\r\n        axios.post(url + '/API/Controllers/ressource/lireRessourcesMethode.php', json)\r\n            .then(response => {\r\n                setRessources(response.data);\r\n            })\r\n            .catch(error => console.log(error))\r\n    }\r\n\r\n    function openFile(name) {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n        window.open(url+ '/API/documentsRessources/' + name);\r\n    }\r\n\r\n    useEffect(() => {\r\n        getRessources();\r\n    },[]);\r\n\r\n    useEffect(() => {\r\n        props.checkedMethod(props.method, checked);\r\n    }, [checked]);\r\n\r\n    \r\n    return (\r\n        <div className=\"Method\">\r\n            <div className=\"methodCard\">\r\n                <div className=\"header\">\r\n                    <div className=\"informations\">\r\n                        <h3>{props.method.Libelle}</h3>\r\n                        <p>{props.method.Description}</p>\r\n                        <div>\r\n                            <div>\r\n                                <FontAwesomeIcon className=\"icon\" icon={faUsers} />  \r\n                                <p>workforce</p> \r\n                                <p>{props.method.Effectif_preconise}</p>\r\n                            </div>\r\n                            <div>\r\n                                <FontAwesomeIcon className=\"icon\" icon={faFolderOpen} />  \r\n                                <p>produced data</p> \r\n                                <p>{props.method.Donnees_produites}</p>\r\n                            </div>\r\n                            <div>\r\n                                <FontAwesomeIcon className=\"icon\" icon={faClipboard} />  \r\n                                <p>method</p>\r\n                                <p>{props.method.Type_methode}</p>\r\n                            </div>\r\n                            <div>\r\n                                <FontAwesomeIcon className=\"icon\" icon={faChartPie} />  \r\n                                <p>analysis</p>\r\n                                <p>{props.method.Type_analyse}</p>\r\n                            </div>\r\n                        </div>\r\n                        <p>{props.method.Exemple}</p>\r\n                    </div>\r\n                    {ressources ?\r\n                    <div className=\"ressources\">                \r\n                            {ressources.map((element, i) => {   \r\n                                return(<div onClick={() => openFile(element.Nom)} key={i} className=\"ressource\">\r\n                                    <FontAwesomeIcon className=\"icon\" icon={faFilePdf} /> \r\n                                    <p title={element.Nom}>{element.Nom}</p>\r\n                                </div>)\r\n                            })}\r\n                    </div>\r\n                    : <p>No ressources</p>\r\n                    }\r\n                </div>\r\n                <div className=\"footer\">\r\n                    <label className=\"switch\">\r\n                        <input onChange={toggleValue} type=\"checkbox\"/>\r\n                        <span className=\"slider round\"></span>\r\n                    </label>\r\n                    <span>retain this method</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"action\">\r\n                <button className=\"button outlined\" onClick={finish}>Finish</button>\r\n                <button className=\"button filled\" onClick={resume}>Continue</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Method;","import React from 'react';\r\nimport axios from 'axios';\r\n\r\nimport Issues from '../components/quiz/issues';\r\nimport Historic from '../components/quiz/historic';\r\nimport Method from '../components/quiz/method';\r\n\r\n\r\nexport class Quiz extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tree: null,\r\n            checkedDecision: null,\r\n            currentMethod: null,\r\n            currentIssue: null,\r\n            retainedMethods: [],\r\n            currentDecisions: [],\r\n            historic: [],\r\n            step: 0        \r\n        };\r\n        // this.componentDidMount = this.componentDidMount.bind(this);\r\n    }\r\n\r\n    // met a jour le questionnaire\r\n    // historic : met a jour l'historique normalement\r\n    // editHistoric : met a jour artificiellement quand on est sur une méthode (arret du flux)\r\n    changeData = async (nextIssueId, decision = null, allChoices = null, historic = true, editHistoric = false) => {\r\n        // ID de la prochaine question\r\n        this.setState({checkedDecision: decision});\r\n\r\n        //  Vérifie si la décision renvoie une méthode\r\n        let method = this.checkMethod(decision);\r\n\r\n        if(method){\r\n            this.manageMethod(decision, method);\r\n        } else {\r\n            // si ID prochaine question pas égal a 0 on récupère info\r\n            if(nextIssueId !== 0){\r\n                if(allChoices){\r\n                    // si on est sur le critère de fin et qu'on continue, on reinitialise l'historique\r\n                    let restart;\r\n                    allChoices.forEach(element => {\r\n                        let decision = this.state.tree.decisions.find(el => el.ID_Decision === element);\r\n                        if(decision.ID_Critere_sortant === 0){\r\n                            // on détecte le critère de fin quand une des décision a un critère sortant null\r\n                            restart = true;\r\n                        }\r\n                    });\r\n                    if(restart){\r\n                        this.addRetainedMethods();\r\n                        this.setState({\r\n                            historic: [],\r\n                            step: 0,\r\n                        }, () => {\r\n                            // quand on conitnu a la fin du questionnaire\r\n                            this.manageStoreData(nextIssueId, decision, historic, editHistoric);\r\n                        });\r\n                    } else {\r\n                        // quand on répond au critère (comportement de base)\r\n                        this.manageStoreData(nextIssueId, decision, historic, editHistoric);\r\n                    }\r\n                } else {\r\n                    // quand on sort d'une méthode (pas de choix fait)\r\n                    this.manageStoreData(nextIssueId, decision, historic, editHistoric);\r\n                }\r\n            }else {\r\n                // quand on sort du questionnaire\r\n                await this.addRetainedMethods();         \r\n                this.props.history.push({\r\n                    pathname: '/summary',\r\n                    state: { retainedMethods: this.state.retainedMethods }\r\n                })            \r\n            }\r\n        }\r\n    }\r\n\r\n    manageStoreData = (nextIssueId, decision, historic, editHistoric) => {\r\n        // on va chercher la prochaine question et réponses\r\n        let issue = this.state.tree.criteres.find(critere => critere.ID_Critere === nextIssueId);\r\n        let decisions =  this.state.tree.decisions.filter(decision => decision.ID_Critere_entrant === issue.ID_Critere);\r\n        let oldIssue = this.state.currentIssue;\r\n        this.setState({\r\n            currentIssue: issue,\r\n            currentDecisions: decisions,\r\n            step: this.state.step + 1\r\n        }, () => {\r\n            // on met a jour l'historique\r\n            if(historic){\r\n                this.manageHistoric(decision, oldIssue)\r\n            }\r\n            if(editHistoric){\r\n                let historicElement = {\r\n                    issue: this.state.currentIssue,\r\n                    decision: null\r\n                }\r\n                this.setState({historic: this.state.historic.concat(historicElement)});  \r\n            }\r\n        });    \r\n    }\r\n\r\n    // on ajoute la méthode dans l'historique\r\n    manageMethod = (decision, method) => {\r\n        let newHistoric = this.state.historic.slice();\r\n        newHistoric[newHistoric.length - 1].decision = decision;\r\n        this.setState({historic: newHistoric}); \r\n\r\n        let historicElement = {\r\n            method: method,\r\n            checked: false\r\n        }\r\n        this.setState({historic: this.state.historic.concat(historicElement)}); \r\n    }\r\n\r\n    checkedMethod = (method, checked) => {\r\n        let index;\r\n        this.state.historic.forEach(element => {\r\n            if('method' in element){\r\n                if(element.method.ID_Methode === method.ID_Methode){\r\n                    index = this.state.historic.indexOf(element);\r\n                }\r\n            }\r\n        });\r\n        let historicElement = {\r\n            method: method,\r\n            checked: checked\r\n        }\r\n        let newHistoric = this.state.historic.slice();\r\n        newHistoric[index] = historicElement;\r\n        this.setState({historic: newHistoric}); \r\n    }\r\n\r\n    // on regarde si une méthode est associé a la décision prise\r\n    checkMethod = (decision) => {\r\n        if(decision){\r\n            let method = this.state.tree.methodes.find(methode => methode.ID_Decision === decision.ID_Decision);\r\n            if(method){\r\n                this.setState({currentMethod: method});\r\n                return method;\r\n            }\r\n        }\r\n    }\r\n\r\n    // ajoute les méthodes retenu lors du précédent passage\r\n    // se produit lorsque on restart le questionnaire\r\n    addRetainedMethods = () => {\r\n        return new Promise((resolve,reject)=>{\r\n            let methods = [];\r\n            this.state.historic.forEach(element => {\r\n                if('method' in element){\r\n                    if(element.checked){\r\n                        if(this.state.retainedMethods.length){\r\n                            let exist =  this.state.retainedMethods.filter(retainedMethod => retainedMethod.method.ID_Methode === element.method.ID_Methode);\r\n                            if(!exist.length){\r\n                                methods.push(element);\r\n                            }\r\n                        } else {\r\n                            console.log(\"PAR LA\")\r\n                            methods.push(element);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            console.log(methods)\r\n        this.setState({retainedMethods: this.state.retainedMethods.concat(methods)}, () => resolve()); \r\n        });\r\n    }\r\n\r\n    // on retourne dans l'historique \r\n    backOut = (ID, type) => {\r\n        // si on retroune a une question\r\n        if(type === 'issue'){\r\n            // si au moment ou on retourne on est sur une méthode\r\n            if(this.state.currentMethod){\r\n                this.setState({currentMethod: null}, () => {\r\n                    this.backIssue(ID);\r\n                })\r\n            } else {\r\n                this.backIssue(ID);\r\n            }\r\n        } else {\r\n            // si on retourne a une méthode\r\n            // let index =  this.state.historic.indexOf(this.state.historic.find(el => el.method));\r\n            let index;\r\n            this.state.historic.forEach(element => {\r\n                if('method' in element){\r\n                    if(element.method.ID_Methode === ID){\r\n                        index = this.state.historic.indexOf(element);\r\n                    }\r\n                }\r\n            });\r\n            let decisionBeforeMethod = this.state.historic[index - 1].decision;   \r\n            this.state.historic.length = index;\r\n            this.setState({step: index});\r\n            this.changeData(decisionBeforeMethod.ID_Critere_sortant, decisionBeforeMethod, null, false);\r\n        }\r\n    }\r\n\r\n    // on rebind les bonne data en fonction de l'ID du critère sélectionné dans l'historique\r\n    backIssue = (ID) => {\r\n        let index;\r\n        this.changeData(ID, null, null, false);\r\n        this.state.historic.forEach(element => {\r\n            if('issue' in element){\r\n                if(element.issue.ID_Critere === ID){\r\n                    index = this.state.historic.indexOf(element);\r\n                }\r\n            }\r\n        });\r\n        // let index =  this.state.historic.indexOf(this.state.historic.find(el => el.issue.ID_Critere === ID));\r\n        this.state.historic.length = index + 1;\r\n        this.state.historic[index].decision = null;\r\n        this.setState({step: index + 1});\r\n    }\r\n\r\n    // on gère l'historique\r\n    manageHistoric = (decision = null, oldIssue) => {\r\n        // si nous ne somme aps sur une méthode\r\n        this.state.historic.forEach(element => {\r\n            if('issue' in element){\r\n                if(element.issue.ID_Critere === oldIssue.ID_Critere){\r\n                    element.decision = decision;\r\n                }\r\n            }\r\n        });\r\n\r\n        // on ajoute le nouveau critère sans décision dans l'historique\r\n        let historicElement = {\r\n            issue: this.state.currentIssue,\r\n            decision: null\r\n        }\r\n        this.setState({historic: this.state.historic.concat(historicElement)}); \r\n    }\r\n\r\n    // on reprend le questionnaire la ou on en était depuis une méthode\r\n    resumeQuiz = () => {\r\n        this.setState({currentMethod: null}, () => {\r\n            this.changeData(this.state.checkedDecision.ID_Critere_sortant, null, null, false, true);\r\n        });\r\n    }\r\n\r\n    componentDidMount(){\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        if(!this.state.tree){\r\n            //axios.get(url + '/API/Controllers/lireArbre.php')\r\n            axios.get(url + '/API/Controllers/lireArbre.php')\r\n            .then(response => {\r\n                this.setState({tree: response.data});\r\n                this.changeData(response.data.entree[0].ID_Critere);\r\n            })\r\n            .catch(error => console.log(error))\r\n        }\r\n    };\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"Quiz\">\r\n                {this.state.currentMethod\r\n                    ? <Method method={this.state.currentMethod}\r\n                        checkedDecision={this.state.checkedDecision}\r\n                        changeData={this.changeData}  \r\n                        resumeQuiz={this.resumeQuiz} \r\n                        checkedMethod={this.checkedMethod}\r\n                        historic={this.state}\r\n                    />\r\n                    :<Issues issue={this.state.currentIssue} \r\n                        decisions={this.state.currentDecisions} \r\n                        changeData={this.changeData}\r\n                        step={this.state.step}\r\n                    />\r\n                }\r\n                \r\n                <div className=\"aside\">\r\n                    <Historic historic={this.state.historic} \r\n                        backOut={this.backOut}\r\n                    />\r\n\r\n                    {this.state.retainedMethods.length ?\r\n                        <div className=\"retainedMethods\">  \r\n                         <div className=\"retainedMethods-header\">\r\n                            <h3>Retained methods</h3>\r\n                        </div>              \r\n                            {this.state.retainedMethods.map((element, i) => {   \r\n                                return(<div key={i}>\r\n                                    <p>{element.method.Libelle}</p>\r\n                                </div>)\r\n                            })}\r\n                        </div>\r\n                        : <div></div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Quiz;\r\n","import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSave } from '@fortawesome/free-solid-svg-icons';\r\n\r\nfunction Toolbar(props) {\r\n    const onDragStart = (event, nodeType) => {\r\n    event.dataTransfer.setData('application/reactflow', nodeType);\r\n    event.dataTransfer.effectAllowed = 'move';\r\n  };\r\n\r\n  return (\r\n    <aside className=\"Toolbar\">\r\n      <div className=\"dndnode input\" onDragStart={(event) => onDragStart(event, 'input')} draggable>\r\n        Input Node\r\n      </div>\r\n      <div className=\"dndnode critereNode\" onDragStart={(event) => onDragStart(event, 'critereNode')} draggable>\r\n        Default Node\r\n      </div>\r\n      <div className=\"dndnode default\" onDragStart={(event) => onDragStart(event, 'default')} draggable>\r\n        Method Node\r\n      </div>\r\n      <div className=\"dndnode output\" onDragStart={(event) => onDragStart(event, 'output')} draggable>\r\n        Output Node\r\n      </div>\r\n\r\n      <button className=\"save button filled\" onClick={props.save}><FontAwesomeIcon className=\"icon\" icon={faSave} /></button>\r\n    </aside>\r\n  );\r\n};\r\n\r\nexport default Toolbar;\r\n","import React, { memo } from 'react';\r\nimport { Handle } from 'react-flow-renderer';\r\n\r\nexport default memo(({ data }) => {\r\n  return (\r\n    <>\r\n      <Handle\r\n        type=\"target\"\r\n        position=\"top\"\r\n        style={{ background: '#555' }}\r\n        onConnect={(params) => console.log('handle onConnect', params)}\r\n      />\r\n      <div className=\"critereNode\">\r\n        {data.label}\r\n      </div>\r\n      <Handle\r\n        type=\"source\"\r\n        position=\"bottom\"\r\n        style={{ background: '#555' }}\r\n        onConnect={(params) => console.log('handle onConnect', params)}\r\n      />\r\n    </>\r\n  );\r\n});","import React, { memo } from 'react';\r\n\r\n// ce noeud sert a forcer le rendu du canvas de render flow #bricolage\r\nexport default memo(() => {\r\n  return (\r\n    <>\r\n      <div className=\"debugNode\">\r\n        Debug node\r\n      </div>\r\n    </>\r\n  );\r\n});","import React, {useEffect, useState} from \"react\";\r\nimport $ from 'jquery';\r\n\r\nfunction ModalEditCritere(props) {\r\n    const [critere, setCritere] = useState(null);\r\n    const [title, setTitle] = useState(null);\r\n\r\n    function customFunction(){\r\n        let label = $('#label').val();\r\n        let informations = $('#informations').val();\r\n        props.mainAction(label, informations)\r\n        closeModal();\r\n    }\r\n\r\n    function closeModal() {\r\n        $('.ModalEditCritere').css(\"display\", \"none\");\r\n        props.close();\r\n        setCritere(null)\r\n    }\r\n\r\n    function openModal() {\r\n        $('.ModalEditCritere').css(\"display\", \"block\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            openModal();\r\n            setCritere(props.selectedCritere)\r\n            setTitle(props.title)\r\n        }\r\n    }, [props.open]);\r\n\r\n\r\n    return (\r\n        <div className=\"Modal ModalEditCritere\">\r\n            {title &&\r\n            <div>\r\n                <h3>{title}</h3>\r\n                <div>\r\n                    {critere &&\r\n                        <form>\r\n                            <label for=\"label\">label</label>\r\n                            <input type=\"text\" id=\"label\" name=\"label\" placeholder=\"\" defaultValue={critere.data.label}/>\r\n                            <label for=\"informations\">additional informations</label>\r\n                            <textarea type=\"text\" id=\"informations\" name=\"informations\" placeholder=\"\" defaultValue={critere.data.informations}/>\r\n                        </form>\r\n                    }\r\n                    <div className=\"action\">\r\n                        <button className=\"button filled\" onClick={customFunction}>Save</button>\r\n                        <button className=\"button outlined\" onClick={closeModal}>Cancel</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalEditCritere;\r\n","import React, {useEffect, useState} from \"react\";\r\nimport $ from 'jquery';\r\n\r\nfunction ModalEditEdge(props) {\r\n    const [edge, setEdge] = useState(null);\r\n    const [title, setTitle] = useState(null);\r\n\r\n    function customFunction(){\r\n        let label = $('#label').val();\r\n        props.mainAction(label)\r\n        closeModal();\r\n    }\r\n\r\n    function closeModal() {\r\n        $('.ModalEditEdge').css(\"display\", \"none\");\r\n        props.close();\r\n        setEdge(null)\r\n    }\r\n\r\n    function openModal() {\r\n        $('.ModalEditEdge').css(\"display\", \"block\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            openModal();\r\n            setEdge(props.selectedEdge)\r\n            setTitle(props.title)\r\n        }\r\n    }, [props.open]);\r\n\r\n    return (\r\n        <div className=\"Modal ModalEditEdge\">\r\n            {title &&\r\n            <div>\r\n                <h3>{title}</h3>\r\n                <div>\r\n                    {edge &&\r\n                        <form>\r\n                            <input type=\"text\" id=\"label\" name=\"label\" placeholder=\"label\" defaultValue={edge.label}/>\r\n                        </form>\r\n                    }\r\n                    <div className=\"action\">\r\n                        <button className=\"button filled\" onClick={customFunction}>Save</button>\r\n                        <button className=\"button outlined\" onClick={closeModal}>Cancel</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalEditEdge;\r\n","import React, {useEffect, useState} from \"react\";\r\nimport $ from 'jquery';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faMinusSquare } from '@fortawesome/free-solid-svg-icons';\r\n\r\nfunction ModalEditMethod(props) {\r\n    const [method, setMethod] = useState(null);\r\n    const [resources, setResources] = useState(null);\r\n    const [allResources, setAllResources] = useState(null);\r\n    const [title, setTitle] = useState(null);\r\n\r\n    function customFunction(){\r\n        let data = {\r\n            label: $('#label').val(),\r\n            description: $('#description').val(),\r\n            productedData: $('#productedData').val(),\r\n            workforce: $('#workforce').val(),\r\n            method: $('#method').val(),\r\n            analysis: $('#analysis').val(),\r\n            exemple: $('#exemple').val()\r\n        }\r\n        props.mainAction(data, resources)\r\n        closeModal();\r\n    }\r\n\r\n    function closeModal() {\r\n        $('.ModalEditMethod').css(\"display\", \"none\");\r\n        props.close();\r\n        setMethod(null)\r\n    }\r\n\r\n    function openModal() {\r\n        $('.ModalEditMethod').css(\"display\", \"block\");\r\n    }\r\n\r\n    function addFile(){\r\n        let selectedFileId = $('select').val();\r\n        if(selectedFileId){\r\n            let selectedFile = props.initialTree.ressources.find(item => item.ID_Ressource === selectedFileId.toString());\r\n            setResources(resources.concat(selectedFile));\r\n        }\r\n    }\r\n\r\n    function removeFile(id){\r\n        if(id){\r\n            let selectedFile = resources.find(item => item.ID_Ressource === id.toString());\r\n            let index = resources.indexOf(selectedFile);\r\n            setResources(resources.filter(item => resources.indexOf(item) !== index))\r\n        }\r\n    }\r\n\r\n    function openFile(name){\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n        window.open(url + '/reactTest/MATUI/src/public/documentsRessources/' + name);\r\n    }\r\n\r\n    function initResources(resources, methodesRessources, method){\r\n        // ressources lié a notre methode\r\n        let methodeRessources = methodesRessources.filter(item => item.ID_Methode === method.id.slice(1));\r\n        // prépare le tableau des ressources\r\n        let ressources = []\r\n        methodeRessources.forEach(element => {\r\n            // push les ressources de la méthode a partir du tableau de liaison\r\n            let ressource = resources.find(item => item.ID_Ressource === element.ID_Ressource);\r\n            ressources.push(ressource)\r\n        })\r\n        setResources(ressources);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            openModal();\r\n            setMethod(props.selectedMethod)\r\n            setTitle(props.title)\r\n            setAllResources(props.initialTree.ressources);\r\n            initResources(props.initialTree.ressources, props.initialTree.methodesRessources, props.selectedMethod)\r\n        }\r\n    }, [props.open]);\r\n\r\n    useEffect(() => {\r\n        if (method && props.resources) {\r\n            setResources(props.resources[method.id.slice(1)])\r\n        }\r\n    }, [method]);\r\n\r\n    return (\r\n        <div className=\"Modal ModalEditMethod\">\r\n            {title &&\r\n            <div>\r\n                <h3>{title}</h3>\r\n                <div>\r\n                    <div className=\"content\">\r\n                        {method &&\r\n                            <form>\r\n                                <label htmlFor=\"label\">label</label>\r\n                                <input type=\"text\" id=\"label\" name=\"label\" placeholder=\"\" defaultValue={method.data.label}/>\r\n                                \r\n                                <label htmlFor=\"label\">description</label>\r\n                                <input type=\"text\" id=\"description\" name=\"description\" placeholder=\"\" defaultValue={method.data.description}/>\r\n                                \r\n                                <label htmlFor=\"label\">workforce</label>\r\n                                <input type=\"text\" id=\"workforce\" name=\"workforce\" placeholder=\"\" defaultValue={method.data.workforce}/>\r\n                                \r\n                                <label htmlFor=\"label\">producted data</label>\r\n                                <input type=\"text\" id=\"productedData\" name=\"productedData\" placeholder=\"\" defaultValue={method.data.productedData}/>\r\n\r\n                                <label htmlFor=\"label\">method</label>\r\n                                <input type=\"text\" id=\"method\" name=\"method\" placeholder=\"\" defaultValue={method.data.method}/>\r\n\r\n                                <label htmlFor=\"label\">analysis</label>\r\n                                <input type=\"text\" id=\"analysis\" name=\"analysis\" placeholder=\"\" defaultValue={method.data.analysis}/>\r\n                                \r\n                                <label htmlFor=\"label\">exemple</label>\r\n                                <input type=\"text\" id=\"exemple\" name=\"exemple\" placeholder=\"\" defaultValue={method.data.exemple}/>     \r\n                            </form>\r\n                        }\r\n                        <div className=\"ressources\">\r\n                            <div className=\"selector\">\r\n                                {allResources &&\r\n                                    <select name=\"pets\" id=\"pet-select\">\r\n                                        <option value=\"\">Choose method</option>\r\n                                        {allResources.map((element, i) => {   \r\n                                            if(!resources.find(item => item.ID_Ressource === element.ID_Ressource)){\r\n                                                return (\r\n                                                    <option key={i} value={element.ID_Ressource}>{element.Nom}</option>\r\n                                                ) \r\n                                            }\r\n                                        })}    \r\n                                    </select>\r\n                                }\r\n                                <button onClick={addFile}><FontAwesomeIcon className=\"icon\" icon={faPlus} /></button>\r\n                            </div>\r\n                            {resources &&\r\n                                <div>\r\n                                {Object.keys(resources).map(function(keyName, keyIndex) {\r\n                                    return (<div className=\"item\" key={keyName}>\r\n                                        <p onClick={() => openFile(resources[keyName].Nom)}>{resources[keyName].Nom}</p>\r\n                                        <FontAwesomeIcon onClick={() => removeFile(resources[keyName].ID_Ressource)} className=\"icon\" icon={faMinusSquare} />\r\n                                        </div>\r\n                                    ) \r\n                                })}    \r\n                                </div>\r\n                            }  \r\n                            {/* <form onSubmit={onSubmit}>\r\n                                <h1>Upload File</h1>\r\n                                <input type=\"file\" onChange={onChange}/>\r\n                                <button type=\"submit\">Upload File</button>\r\n                            </form>   */}\r\n                        </div>      \r\n                    </div>   \r\n                    <div className=\"action\">\r\n                        <button className=\"button filled\" onClick={customFunction}>Save</button>\r\n                        <button className=\"button outlined\" onClick={closeModal}>Cancel</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalEditMethod;\r\n","import React, {useEffect, useState} from \"react\";\r\nimport $ from 'jquery';\r\n\r\nfunction ModalEditEndNode(props) {\r\n    const [endNode, setEndNode] = useState(null);\r\n    const [title, setTitle] = useState(null);\r\n\r\n    function customFunction(){\r\n        let message = $('#message').val();\r\n        props.mainAction(message)\r\n        closeModal();\r\n    }\r\n\r\n    function closeModal() {\r\n        $('.ModalEditEndNode').css(\"display\", \"none\");\r\n        props.close();\r\n        setEndNode(null)\r\n    }\r\n\r\n    function openModal() {\r\n        $('.ModalEditEndNode').css(\"display\", \"block\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            openModal();\r\n            setEndNode(props.selectedEndNode)\r\n            setTitle(props.title)\r\n        }\r\n    }, [props.open]);\r\n\r\n    return (\r\n        <div className=\"Modal ModalEditEndNode\">\r\n            {title &&\r\n            <div>\r\n                <h3>{title}</h3>\r\n                <div>\r\n                    {endNode &&\r\n                        <form>\r\n                            <input type=\"text\" id=\"message\" name=\"message\" placeholder=\"message\" defaultValue={endNode.data.message}/>\r\n                        </form>\r\n                    }\r\n                    <div className=\"action\">\r\n                        <button className=\"button filled\" onClick={customFunction}>Save</button>\r\n                        <button className=\"button outlined\" onClick={closeModal}>Cancel</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalEditEndNode;\r\n","import React, {useEffect} from \"react\";\r\nimport $ from 'jquery';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\r\n\r\nfunction ModalWarning(props) {  \r\n\r\n    function closeModal(){\r\n        $('.ModalWarning').css(\"display\", \"none\");\r\n        props.close();\r\n    }\r\n\r\n    function openModal(){\r\n        $('.ModalWarning').css(\"display\", \"block\");\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        if(props.open){\r\n            openModal();\r\n        }\r\n    }, [props.open]);\r\n\r\n\r\n    return (\r\n        <div className=\"Modal ModalWarning\">\r\n            <div>\r\n                <h3>Warning !</h3>\r\n                <strong><FontAwesomeIcon className=\"icon\" icon={faExclamationTriangle} />cannot save</strong>\r\n                {props.message &&\r\n                    <p>{props.message}</p>\r\n                }\r\n                <div className=\"action\">\r\n                    <button className=\"button filled\" onClick={closeModal}>Cancel</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalWarning;\r\n","import React, {useEffect} from \"react\";\r\nimport $ from 'jquery';\r\n\r\nfunction ModalInformation(props) {  \r\n\r\n    function closeModal(){\r\n        $('.ModalInformation').css(\"display\", \"none\");\r\n        props.close();\r\n    }\r\n\r\n    function openModal(){\r\n        $('.ModalInformation').css(\"display\", \"block\");\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        if(props.open){\r\n            openModal();\r\n        }\r\n    }, [props.open]);\r\n\r\n\r\n    return (\r\n        <div className=\"Modal ModalInformation\">\r\n            <div>\r\n                <h3>Succes !</h3>\r\n                <p>Tree has been save</p>\r\n                <div className=\"action\">\r\n                    <button className=\"button filled\" onClick={closeModal}>Cancel</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalInformation;\r\n","import React, {useRef, useState, useEffect} from 'react';\r\nimport $, { get } from 'jquery';\r\nimport axios from 'axios';\r\nimport ReactFlow, {addEdge, ReactFlowProvider, removeElements} from 'react-flow-renderer';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport Loader from '../components/Loader';\r\nimport Toolbar from '../components/Toolbar';\r\nimport CustomNode from '../components/tree/CustomNode';\r\nimport DebugNode from '../components/tree/DebugNode';\r\n\r\nimport ModalEditCritere from '../components/modal/tree/ModalEditCritere';\r\nimport ModalEditEdge from '../components/modal/tree/ModalEditEdge';\r\nimport ModalEditMethod from '../components/modal/tree/ModalEditMethod';\r\nimport ModalEditEndNode from '../components/modal/tree/ModalEditEndNode';\r\nimport ModalWarning from '../components/modal/ModalWarning';\r\nimport ModalInformation from '../components/modal/ModalInformation';\r\nimport ModalConfirmation from '../components/modal/ModalConfirmation';\r\nimport { faHubspot } from '@fortawesome/free-brands-svg-icons';\r\n\r\nfunction Tree() {\r\n    // noeud custom pour les critères\r\n    const nodeTypes = {\r\n        critereNode: CustomNode,\r\n        debugNode: DebugNode\r\n    };\r\n\r\n    // tableau de couleur (sera bindé par la suite lors de la construction de l'arbre)\r\n    const colors = ['black', 'marron', 'blue', 'red', 'purple', 'fushia', 'green', 'lime', 'yellow',\r\n'navy', 'aqua', 'aquamarine', 'chocolate', 'coral', 'crimson', 'darkcyan', 'darkgreen', 'darkorange', 'darkseagreen',\r\n'deeppink', 'gold', 'indgo', 'lightcoral'];\r\n\r\n    const [initialTree, setInitialTree] = useState(null);\r\n    const [nextId, setNextId] = useState(\"1\");\r\n    const [nextEdgeId, setNextEdgeId] = useState(\"D1\");\r\n    const [nextMethodId, setNextMethodId] = useState(\"M1\");\r\n    const [elements, setElements] = useState([]);\r\n    const [remove, setRemove] = useState(false);\r\n\r\n    const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n    const reactFlowWrapper = useRef(null);\r\n    const [reactFlowInstance, setReactFlowInstance] = useState(null);\r\n    const onElementsRemove = (elementsToRemove) => setElements((els) => removeElements(elementsToRemove, els));\r\n    const onConnect = (params) => setElements((els) => addEdge({\r\n        ...params,\r\n        id: getEdgeId(), arrowHeadType: 'arrowclosed', label: '', type: 'smoothstep',\r\n    }, els, setNextEdgeId(\"D\" + (parseInt(nextEdgeId.slice(1)) + 1).toString())));\r\n\r\n    // HOOKS REACT-FLOW\r\n\r\n    const onDragOver = (event) => {\r\n        event.preventDefault();\r\n        event.dataTransfer.dropEffect = 'move';\r\n    };\r\n\r\n    // créer l'objet au drop\r\n    const onDrop = (event) => {\r\n        event.preventDefault();\r\n\r\n        //check if input/output already exists\r\n        const type = event.dataTransfer.getData('application/reactflow');\r\n        if (type!= null && type == \"input\" || type == \"output\") {\r\n            if (checkExist(type)) {\r\n                return alert(\"Désolé, il ne peut y avoir qu'un seul noeud de type \" + type)\r\n            }\r\n        }\r\n\r\n        const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\r\n        let toolbarWidth = $('aside').width();\r\n        console.log(reactFlowBounds.left)\r\n        const position = reactFlowInstance.project({\r\n            x: event.clientX - (reactFlowBounds.left + toolbarWidth),\r\n            y: event.clientY - reactFlowBounds.top,\r\n        });\r\n        createNode(type, position);\r\n    };\r\n\r\n    // au clique d'un élément on effectue une actions elon son type\r\n    const onElementClick = (event, element) => {\r\n        if(!remove){\r\n            switch (element.type) {\r\n                case 'critereNode':\r\n                    openModalEditCritere(element);\r\n                    break;\r\n                case 'default':\r\n                    openModalEditMethod(element);\r\n                    break;\r\n                case 'smoothstep':\r\n                    openModalEditEdge(element);\r\n                    break;\r\n                case 'input':\r\n                    alert(\"Cannot modify start node\")\r\n                    break;\r\n                case 'output':\r\n                    openModalEditEndNode(element);\r\n                    break;\r\n            }\r\n        } else {\r\n            // si le mode remove est activé on vérifie que l'élement n'est pas relié\r\n            // si l'élement n'est pas flottant on indique qu'il doit l'être pour être supprimé\r\n            if(element.type != \"smoothstep\"){\r\n                let edges = elements.filter(item => item.type === \"smoothstep\");\r\n                let attachedEdges = edges.filter(item => item.source === element.id || item.target === element.id );\r\n                if(attachedEdges.length > 0){\r\n                    alert(\"You must remove all edges from this element\")\r\n                } else {\r\n                    openModalConfirmation(element)\r\n                }\r\n            } else {\r\n                openModalConfirmation(element)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onPaneClick = (event) => {\r\n        event.preventDefault();\r\n    }\r\n\r\n    // FUNCTIONS\r\n\r\n    // return les prochains ID utilisable\r\n    function getId() {\r\n        return nextId;\r\n    }\r\n\r\n    function getEdgeId() {\r\n        return nextEdgeId;\r\n    }\r\n\r\n    function getMethodId() {\r\n        return nextMethodId;\r\n    }\r\n\r\n    /*\r\n    crée un noeud de type :\r\n        - input\r\n        - output\r\n        - default (method)\r\n        - critereNode (critere)\r\n\r\n    parametres :\r\n        - type : type du noeud\r\n        - position : position du client si noeud créer via toolbar ou position x et y stocké en bd\r\n        - data : toutes les data du noeud de la BD, si noeud créer via toolbar le label et générer par défault\r\n    */\r\n    function createNode(type, position, data) {\r\n        let newNode;\r\n        switch (type) {\r\n            case 'input':\r\n                // noeud entree\r\n                newNode = {\r\n                    id: \"0\",\r\n                    type,\r\n                    position,\r\n                    data: {label: `${type} node`},\r\n                };\r\n                break;\r\n            case 'output':\r\n                // noeud sortie\r\n                newNode = {\r\n                    id: \"S0\",\r\n                    type,\r\n                    position,\r\n                    data: {\r\n                        label: `${type} node`,\r\n                        message: (data ? data.Message : null)\r\n                    },\r\n                };\r\n                break;\r\n            case 'critereNode':\r\n                // noeud critere\r\n                if(data){\r\n                    newNode = {\r\n                        id: data.ID_Critere,\r\n                        type,\r\n                        position,\r\n                        data: {\r\n                            label: data.Libelle,\r\n                            informations: (data.Informations ? data.Informations : null)\r\n                        },\r\n                    };\r\n                } else {\r\n                    newNode = {\r\n                        id: getId(),\r\n                        type,\r\n                        position,\r\n                        data: {label: \"default critere label\"},\r\n                    };\r\n                    setNextId((parseInt(nextId) + 1).toString());\r\n                }\r\n                break;\r\n            case 'default':\r\n                // noeud methode\r\n                if(data){\r\n                    newNode = {\r\n                        id: \"M\" + data.ID_Methode,\r\n                        type,\r\n                        position,\r\n                        data: {\r\n                            label: data.Libelle,\r\n                            description: data.Description,\r\n                            productedData: data.Donnees_produites,\r\n                            workforce: data.Effectif_preconise,\r\n                            method: data.Type_methode,\r\n                            analysis: data.Type_analyse,\r\n                            exemple: data.Exemple\r\n                        },\r\n                    };   \r\n                } else {\r\n                    newNode = {\r\n                        id: getMethodId(),\r\n                        type,\r\n                        position,\r\n                        data: {label: \"default method label\"},\r\n                    };\r\n                    setNextMethodId(\"M\" + (parseInt(getMethodId().slice(1)) + 1).toString());\r\n                }\r\n                break;\r\n        }\r\n        // insertion du noeud dans les elements react flow render\r\n        setElements((es) => es.concat(newNode));\r\n    }\r\n    \r\n    // crée un lien entre 2 noeuds\r\n    function createEdge(id, id_source, id_target, label, color){\r\n        let newEdge = {\r\n            id: id,\r\n            source: id_source,\r\n            target: id_target,\r\n            type: 'smoothstep',\r\n            arrowHeadType: 'arrowclosed',\r\n            label: label,\r\n            style: { stroke: color },\r\n        }\r\n        setElements((es) => es.concat(newEdge));\r\n    }\r\n\r\n    // check if a node type already exists (utilisé pour vérifier qu'on ne crée pas 2 noeuds input et output)\r\n    function checkExist(type) {\r\n        if(elements){\r\n            for (let i = 0; i < elements.length; i++) {\r\n                if (elements[i].type == type) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    // gestion de la supression\r\n    function deleteMode(){\r\n        remove ? setRemove(false) : setRemove(true);\r\n    }\r\n\r\n    // supprimer un element\r\n    function deleteElement(element){\r\n            let selectedElement = elements.find(el => el.id === element.id);\r\n            let index = elements.indexOf(selectedElement);\r\n            setElements(elements.filter(item => elements.indexOf(item) !== index))\r\n    }\r\n\r\n    // toggle de style quand on active le mode remove\r\n    useEffect(() => {\r\n        if(remove){\r\n            $(\".canvas\").addClass( \"removeMode\" );\r\n            $(\".removeModeMessage\").css(\"opacity\", \"1\");\r\n            $(\".Toolbar\").css({\"pointer-events\": \"none\", \"filter\" : \"grayscale(1)\"});\r\n        } else {\r\n            $(\".canvas\").removeClass( \"removeMode\" );\r\n            $(\".removeModeMessage\").css(\"opacity\", \"0\");\r\n            $(\".Toolbar\").css({\"pointer-events\": \"auto\", \"filter\" : \"none\"});\r\n        }\r\n    },[remove]);\r\n\r\n    // INIT TREE\r\n\r\n    // initialise le noeud de debut et le premier critere pour commencer\r\n    function initTree(){\r\n        let startNode = initialTree.entree[0];\r\n        createNode('input', {x: parseInt(startNode.x), y: parseInt(startNode.y)});\r\n\r\n        let firstNode = initialTree.criteres.find(el => el.ID_Critere === initialTree.entree[0].ID_Critere);\r\n        createNode('critereNode', {x: parseInt(firstNode.x), y: parseInt(firstNode.y)}, firstNode);\r\n        createEdge('D0' ,'0', firstNode.ID_Critere, null);\r\n\r\n        let endNode = initialTree.sortie[0];\r\n        createNode('output',  {x: parseInt(endNode.x), y: parseInt(endNode.y)}, endNode);\r\n\r\n        // initialise la fin de l'arbre\r\n        initNodes(initialTree.entree[0].ID_Critere);\r\n    }\r\n\r\n    // initilialise critère, méthodes et décisiosn depuis le premier critère\r\n    function initNodes(start){\r\n        initialTree.criteres.forEach(node => {\r\n            // on récupère une couleur\r\n            let color = colors[0]\r\n            colors.splice(0, 1);\r\n\r\n            if(node.ID_Critere !== start){\r\n                createNode('critereNode',  {x: parseInt(node.x), y: parseInt(node.y)}, node)\r\n            }\r\n            // on récupère les décisions attaché au critère et on regarde si un méthode est attaché\r\n            let decisions = getDecisions(node.ID_Critere);\r\n            decisions.forEach(decision => {\r\n                // si une méthode est associé a la décision on traite différement\r\n                let method = getMethod(decision);\r\n                if(method){\r\n                    createNode('default',  {x: parseInt(method.x), y: parseInt(method.y)}, method);\r\n                    // on crée le lien d'entrée et de sortie de la méthode\r\n                    createEdge(\"D\" + decision.ID_Decision ,node.ID_Critere, \"M\" + method.ID_Methode, decision.Libelle, color);\r\n                    createEdge(\"DM\" + decision.ID_Decision, \"M\" + method.ID_Methode, decision.ID_Critere_sortant, null, color);\r\n                } else {\r\n                    if(decision.ID_Critere_sortant){\r\n                        createEdge(\"D\" + decision.ID_Decision, decision.ID_Critere_entrant, decision.ID_Critere_sortant, decision.Libelle, color);\r\n                    } else {\r\n                        createEdge(\"D\" + decision.ID_Decision, decision.ID_Critere_entrant, \"S0\", decision.Libelle, color);\r\n                    }\r\n                }\r\n            })                \r\n        });\r\n    }\r\n\r\n    // on set edgeId a l'id maximum\r\n    function initEdgesId(){\r\n        let highest = 0;\r\n        initialTree.decisions.forEach(decision => {\r\n            if(parseInt(decision.ID_Decision) >= highest){\r\n                highest = decision.ID_Decision;\r\n            }\r\n        })\r\n        setNextEdgeId(\"D\" + (parseInt(highest) + 1).toString());\r\n    }\r\n\r\n    // on set methodId a l'id maximum\r\n    function initMethodId(){\r\n        let highest = 0;\r\n        initialTree.methodes.forEach(methode => {\r\n            if(parseInt(methode.ID_Methode) >= highest){\r\n                highest = methode.ID_Methode;\r\n            }\r\n        })\r\n        setNextMethodId(\"M\" + (parseInt(highest) + 1).toString());\r\n    }\r\n\r\n    // on set nodeId a l'id maximum\r\n    function initNodeId(){\r\n        let highest = 0;\r\n        initialTree.criteres.forEach(critere => {\r\n            if(parseInt(critere.ID_Critere) >= highest){\r\n                highest = critere.ID_Critere;\r\n            }\r\n        })\r\n        setNextId((parseInt(highest) + 1).toString());\r\n    }\r\n\r\n    // retourne les décisions d'un noeud\r\n    function getDecisions(nodeId){\r\n        let decisions =  initialTree.decisions.filter(decision => decision.ID_Critere_entrant === nodeId);\r\n        return decisions;\r\n    }\r\n\r\n    // retourne la méthode d'un décision si elle existe\r\n    function getMethod(decision){\r\n        let method =  initialTree.methodes.find(method => method.ID_Decision === decision.ID_Decision);\r\n        return method;\r\n    }\r\n\r\n    // récupère l'arbre a l'initialisation du composant\r\n    useEffect(() => {\r\n        if(!initialTree){\r\n            let protocol = window.location.protocol;\r\n            let host = window.location.hostname;\r\n            let url = protocol + '//' + host;\r\n                axios.get(url + '/API/Controllers/lireArbre.php')\r\n                .then(response => {\r\n                    setInitialTree(response.data)\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    },[]);\r\n\r\n    // quand l'arbre et chargé et si il possède une entree on lance la création de l'arbre visuel\r\n    useEffect(() => {\r\n        if(initialTree){\r\n            // si l'arbre possède un noeud d'entrée et de sortie on peut le construire\r\n            if(initialTree.entree.length && initialTree.sortie.length){\r\n                initTree();\r\n                initEdgesId();\r\n                initMethodId();\r\n                initNodeId();\r\n            }else{\r\n                // si ce n'est pas le cas on vérifie si il existe, si il y'a des résidu on prévient qu'il y'a un problème\r\n                if(initialTree.methodes.length || initialTree.criteres.length || initialTree.decisions.length){\r\n                    alert('Something went wrong, tree cannot be built');\r\n                }\r\n            }\r\n        } \r\n    }, [initialTree]);\r\n\r\n\r\n    // RECONSTRUCTION DE L'ARBRE\r\n\r\n    /*\r\n    types :\r\n        - input (start node)\r\n        - output (end node)\r\n        - default (node)\r\n        - smoothstep (edge)\r\n    */\r\n    function saveTree() {\r\n        // on récupère les élements de l'instance react flow\r\n        let flow = reactFlowInstance.toObject();\r\n        // on set l'arbre que nous allons envoyé au serveur\r\n        let finalTree = {\r\n            criteres: [],\r\n            methodes: [],\r\n            methodesRessources: initialTree.methodesRessources,\r\n            decisions: [],\r\n            entree: [],\r\n            sortie: [],\r\n        };\r\n\r\n        // pour chaque élément on le transforme pour le serveur\r\n        flow.elements.forEach(element => {\r\n            let transformedElement;\r\n            switch (element.type) {\r\n                case 'critereNode':\r\n                    transformedElement = transformToCritere(element);\r\n                    finalTree.criteres.push(transformedElement)\r\n                    break;\r\n                case 'default':\r\n                    transformedElement = transformToMethod(element, flow);\r\n                    finalTree.methodes.push(transformedElement)\r\n                    break;\r\n                case 'smoothstep':\r\n                    if(element.label){\r\n                        transformedElement = transformToDecision(element, flow);\r\n                        finalTree.decisions.push(transformedElement)\r\n                    }\r\n                        break;\r\n                case 'input':\r\n                    transformedElement = transformToEntree(element,flow);\r\n                    finalTree.entree.push(transformedElement)\r\n                    break;\r\n                case 'output':\r\n                    transformedElement = transformToSortie(element);\r\n                    finalTree.sortie.push(transformedElement)\r\n                    break;\r\n            }\r\n        })\r\n        \r\n        // on regarde si il y'a des erreurs dans l'arbre (cas inaproprié)\r\n        let error = checkTree(finalTree);\r\n        if(!error){\r\n            let protocol = window.location.protocol;\r\n            let host = window.location.hostname;\r\n            let url = protocol + '//' + host;\r\n                axios.post(url + '/API/Controllers/creerArbre.php', finalTree)\r\n                .then(response => {\r\n                    setModalInformationOpen(true);\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    }\r\n\r\n    /*\r\n        Fonctions de transformation de l'arbre final\r\n    */\r\n\r\n    // transforme un critère au bon objet\r\n    function transformToCritere(element){\r\n        let critere = {\r\n            ID_Critere: element.id,\r\n            Libelle: element.data.label,\r\n            Informations: (element.data.informations ? element.data.informations : null),\r\n            x: element.position.x,\r\n            y: element.position.y\r\n        }\r\n        return critere;\r\n    }\r\n\r\n    // transforme une méthode au bon objet\r\n    function transformToMethod(element, flow){\r\n        // récupère l'id de décision pointant cette méthode\r\n        let decision = flow.elements.find(el => el.type === \"smoothstep\" && el.target === element.id);\r\n        let method = {\r\n            ID_Methode: element.id.slice(1),\r\n            ID_Decision: (decision ? decision.id.slice(1) : null),\r\n            Libelle: element.data.label,\r\n            Description: element.data.description,\r\n            Donnees_produites: element.data.productedData,\r\n            Effectif_preconise: element.data.workforce,\r\n            Exemple: element.data.exemple,\r\n            Type_analyse: element.data.analysis,\r\n            Type_methode: element.data.method,\r\n            x: element.position.x,\r\n            y: element.position.y\r\n        }\r\n        return method;\r\n    }\r\n\r\n    // transforme une décision au bon objet\r\n    function transformToDecision(element, flow){\r\n        let outDecision;\r\n        // vérifie si la décision porte une méthode pour avoir le noeud de sortie de la décision\r\n        if(element.target.includes(\"M\")){\r\n            outDecision = flow.elements.find(el => el.type === \"smoothstep\" && el.source === element.target);\r\n        }\r\n\r\n        let decision = {\r\n            ID_Decision: element.id.slice(1),\r\n            ID_Critere_entrant: element.source,\r\n            ID_Critere_sortant: (outDecision ? outDecision.target : element.target),\r\n            Libelle: element.label,\r\n        }\r\n        return decision;\r\n    }\r\n\r\n    // transforme l'entree au bon objet\r\n    function transformToEntree(element, flow){\r\n        let outDecision = flow.elements.find(el => el.type === \"smoothstep\" && el.source === element.id);\r\n        let startNode = {\r\n            ID_Entree: element.id,\r\n            ID_Critere: (outDecision ? outDecision.target : null),\r\n            x: element.position.x,\r\n            y: element.position.y\r\n        }\r\n        return startNode;\r\n    }\r\n\r\n    // transforme la sortie au bon objet\r\n    function transformToSortie(element){\r\n        let endNode = {\r\n            ID_Sortie: 1, //element.id.slice(1),\r\n            message: element.data.message,\r\n            x: element.position.x,\r\n            y: element.position.y\r\n        }\r\n        return endNode;\r\n    }\r\n\r\n    /*\r\n    l'abre doit :\r\n        - posséder un noeud entree et sortie\r\n        - ne pas posséder d'élements flottant (non relié ou partiellement relié)\r\n        - ne pas posséder d'élements non labellisé excepté les noeud d'entree, sortie,\r\n            liens sortant des méthodes et le lien source du noeud d'entree\r\n    */\r\n    function checkTree(finalTree){\r\n        let error = false;\r\n        // vérifie si il y'a bien un noeud d'entrée et de sortie\r\n        if(finalTree.entree.length != 1){\r\n            setErrorMessage(\"Tree must have start node\");\r\n            error = true;\r\n        } else if (finalTree.sortie.length != 1){\r\n            setErrorMessage(\"Tree must have end node\");\r\n            error = true;\r\n        } else if (!finalTree.criteres.length){\r\n            setErrorMessage(\"Tree must have node\");\r\n            error = true;\r\n        } \r\n\r\n        // si c'est le cas on vérifie si il n'y a pas de noeud flottant\r\n        if(!error){\r\n            let floatingNode = checkFloatingNode(finalTree);\r\n            let floatingMethod = checkFloatingMethod(finalTree);\r\n            if(floatingNode || floatingMethod){\r\n                error = true;\r\n            }\r\n        }\r\n        \r\n        return error;\r\n    }\r\n\r\n    // vérifie si il y'a un noeud flottant\r\n    function checkFloatingNode(finalTree){\r\n        let condition = true;\r\n\r\n        // pour chaque critère on regarde les décisions entrante et sortante\r\n        finalTree.criteres.forEach(critere => {\r\n            let outputEdge = null;\r\n            let inputEdge = null;\r\n            outputEdge = finalTree.decisions.filter(decision => decision.ID_Critere_entrant === critere.ID_Critere);\r\n            inputEdge = finalTree.decisions.filter(decision => decision.ID_Critere_sortant === critere.ID_Critere);\r\n\r\n            // on gère le cas ou c'est la décision suivant le noeud d'entrée\r\n            if(!inputEdge.length){\r\n                if(finalTree.entree[0].ID_Critere === critere.ID_Critere){\r\n                    inputEdge.push(finalTree.entree[0]);\r\n                }\r\n            }\r\n\r\n            // si il n'ya pas de noeud sortant ou entrant la condition n'est pas respecté\r\n            if(!inputEdge.length || !outputEdge.length){\r\n                condition = false;\r\n            }\r\n\r\n            // si le noeud sortant contient un \"M\" ca veut dire qu'il manque un lien après la méthode\r\n            // la condition n'est pas respecté\r\n            outputEdge.forEach(element =>{\r\n                if(element.ID_Critere_sortant.charAt(0) === \"M\"){\r\n                    condition = false;\r\n                }\r\n            })\r\n        })\r\n        // si la condition n'est pas respecté on set un message d'erreur\r\n        if(!condition){\r\n            setErrorMessage(\"There is a floating node somewhere, check that each edge has a label (except output edge from the start node and methods) and that each critere is connected\");\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // vérifie si il y'a une méthode flottante\r\n    function checkFloatingMethod(finalTree){\r\n        let condition = true;\r\n\r\n        finalTree.methodes.forEach(element => {\r\n            if(!element.ID_Decision){\r\n                condition = false;\r\n            } else {\r\n                let decision = finalTree.decisions.find(item => item.ID_Decision === element.ID_Decision);\r\n                if(!decision){\r\n                    condition = false;\r\n                } else {\r\n                    // vérifie qu'un méthode n'est pas conencté au noeud de fin\r\n                    if(decision.ID_Critere_sortant == \"S0\"){\r\n                        condition = false;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        switch(condition){\r\n            case true:\r\n                return false;\r\n            case false:\r\n                if(!errorMessage){\r\n                    setErrorMessage(\"There is a floating method somewhere, check that each edge has a label and that each method is connected\");\r\n                }\r\n                return true;\r\n        }\r\n    }\r\n    \r\n    // MODAL MANAGEMENT\r\n\r\n    // warning modal\r\n    const [modalWarningOpen, setModalWarningOpen] = useState(false);\r\n\r\n    function closeModalWarning(){\r\n        setErrorMessage(null);\r\n        setModalWarningOpen(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(errorMessage){\r\n            setModalWarningOpen(true);\r\n        }\r\n    }, [errorMessage]);\r\n\r\n\r\n    // information modal\r\n    const [modalInformationOpen, setModalInformationOpen] = useState(false);\r\n\r\n    function closeModalInformation(){\r\n        setModalInformationOpen(false);\r\n    }\r\n\r\n\r\n    // connfirmation modal\r\n    const [modalConfirmationOpen, setModalConfirmationOpen] = useState(false);\r\n    const [messageConfirmation, setMessageConfirmation] = useState(null);\r\n    const [selectedConfirmationElement, setSelectedConfirmationElement] = useState(null);\r\n\r\n    function openModalConfirmation(element) {\r\n        setModalConfirmationOpen(true);\r\n        setMessageConfirmation(\"Do you want to delete this element ?\")\r\n        setSelectedConfirmationElement(element)\r\n    }\r\n\r\n    function closeConfirmationModal(){\r\n        setModalConfirmationOpen(false);\r\n    }\r\n\r\n\r\n    // edit critères modale\r\n    const [modalEditCritereOpen, setModalEditCritereOpen] = useState(false);\r\n    const [selectedCritere, setSelectedCritere] = useState(null);\r\n\r\n    function openModalEditCritere(element) {\r\n        let critere = elements.find(el => el.id === element.id);\r\n        setSelectedCritere(critere);\r\n        setModalEditCritereOpen(true);\r\n    }\r\n\r\n    function closeModalEditCritere(){\r\n        setModalEditCritereOpen(false);\r\n    }\r\n\r\n    function saveCritere(label, informations){\r\n        // change les data dans l'instance react flow\r\n        selectedCritere.data.label = label;\r\n        if(informations){selectedCritere.data.informations = informations;}\r\n\r\n        // force le rendu du noeud\r\n        // l'instance ne se rerender pas si modification dans sous object donc on change position\r\n        selectedCritere.position = {x: selectedCritere.position.x, y: selectedCritere.position.y + 1}\r\n        rerenderFlow();\r\n    }\r\n\r\n\r\n    // edit edges modal\r\n    const [modalEditEdgeOpen, setModalEditEdgeOpen] = useState(false);\r\n    const [selectedEdge, setSelectedEdge] = useState(null);\r\n\r\n    function openModalEditEdge(element) {\r\n        let edge = elements.find(el => el.id === element.id);\r\n        setSelectedEdge(edge);\r\n        setModalEditEdgeOpen(true);\r\n    }\r\n\r\n    function closeModalEditEdge(){\r\n        setModalEditEdgeOpen(false);\r\n    }\r\n\r\n    function saveEdge(label){\r\n        selectedEdge.label = label;\r\n        rerenderFlow();\r\n    }\r\n\r\n\r\n    // edit methode modale\r\n    const [modalEditMethodOpen, setModalEditMethodOpen] = useState(false);\r\n    const [selectedMethod, setSelectedMethod] = useState(null);\r\n\r\n    function openModalEditMethod(element) {\r\n        let method = elements.find(el => el.id === element.id);\r\n        setSelectedMethod(method);\r\n        setModalEditMethodOpen(true);\r\n    }\r\n\r\n    function closeModalEditMethod(){\r\n        setModalEditMethodOpen(false);\r\n    }\r\n\r\n    function saveMethod(newData, newResources){\r\n        // change les data dans l'instance react flow\r\n        selectedMethod.data.label = newData.label;\r\n        selectedMethod.data.description = newData.description;\r\n        selectedMethod.data.productedData = newData.productedData;\r\n        selectedMethod.data.workforce = newData.workforce;\r\n        selectedMethod.data.method = newData.method;\r\n        selectedMethod.data.analysis = newData.analysis;\r\n        selectedMethod.data.exemple = newData.exemple;\r\n\r\n        // liste des ressources actuellement associé à la méthode\r\n        let thisMethodResources = initialTree.methodesRessources.filter(item => item.ID_Methode === selectedMethod.id.slice(1));\r\n\r\n        // associe les ressources qui ne l'etait aps deja a la méthode        \r\n        newResources.forEach(newResource => {\r\n            let resource = thisMethodResources.filter(item => item.ID_Ressource === newResource.ID_Ressource);\r\n            if(!resource.length){\r\n                let newMethodResource = {\r\n                    ID_Methode: selectedMethod.id.slice(1),\r\n                    ID_Ressource: newResource.ID_Ressource\r\n                }\r\n                initialTree.methodesRessources.push(newMethodResource);\r\n            }\r\n        })\r\n\r\n        // supprime les ressources qui ne sont plus associé\r\n        initialTree.methodesRessources.forEach(oldResource => {\r\n            let resource = newResources.filter(item => item.ID_Ressource === oldResource.ID_Ressource);\r\n            if(!resource.length){\r\n                let index =  initialTree.methodesRessources.indexOf(oldResource);\r\n                initialTree.methodesRessources = initialTree.methodesRessources.filter(item => initialTree.methodesRessources.indexOf(item) !== index);\r\n            }   \r\n        })\r\n        \r\n\r\n        // force le rendu du noeud\r\n        // l'instance ne se rerender pas si modification dans sous object donc on change position\r\n        selectedMethod.position = {x: selectedMethod.position.x, y: selectedMethod.position.y + 1}\r\n        rerenderFlow();\r\n    }\r\n\r\n\r\n    // edit noeud de fin modale\r\n    const [modalEditEndNodeOpen, setModalEditEndNodeOpen] = useState(false);\r\n    const [selectedEndNode, setSelectedEndNode] = useState(null);\r\n\r\n    function openModalEditEndNode(element) {\r\n        let endNode = elements.find(el => el.id === element.id);\r\n        setSelectedEndNode(endNode);\r\n        setModalEditEndNodeOpen(true);\r\n    }\r\n\r\n    function closeModalEditEndNode(){\r\n        setModalEditEndNodeOpen(false);\r\n    }\r\n\r\n    function saveEndNode(message){\r\n        // change les data dans l'instance react flow\r\n        selectedEndNode.data.message = message;\r\n\r\n        // force le rendu du noeud\r\n        // l'instance ne se rerender pas si modification dans sous object donc on change position\r\n        selectedEndNode.position = {x: selectedEndNode.position.x, y: selectedEndNode.position.y + 1}\r\n        rerenderFlow();\r\n    }\r\n\r\n\r\n    // FORCE RERENDER\r\n    function rerenderFlow(){\r\n        let cloneElements = [...elements];\r\n        setElements(cloneElements);     \r\n    }\r\n\r\n    return (\r\n        <div className=\"Tree\">\r\n            {elements ?\r\n                <ReactFlowProvider>\r\n                    <div className=\"reactflow-wrapper\" ref={reactFlowWrapper}>\r\n                        <Toolbar className=\"tools\"\r\n                            save={saveTree}\r\n                        />\r\n                        <div className=\"canvas\">\r\n                            <ReactFlow\r\n                                elements={elements}\r\n                                nodeTypes={nodeTypes}\r\n                                onElementsRemove={onElementsRemove}\r\n                                onConnect={onConnect}\r\n                                // deleteKeyCode={46}\r\n                                onLoad={setReactFlowInstance}\r\n                                onDrop={onDrop}\r\n                                onDragOver={onDragOver}\r\n                                onElementClick={onElementClick}\r\n                                onPaneClick={onPaneClick}/>\r\n                        </div>\r\n                        <FontAwesomeIcon onClick={() => deleteMode()} className=\"icon delete\" icon={faTrashAlt} />\r\n                        <p className=\"removeModeMessage\">Warning, you activated the suppression mode</p>\r\n                    </div>\r\n                    {/*<button onClick={() => console.log(nextEdgeId)}>debug</button>*/}\r\n\r\n                    <ModalEditCritere\r\n                        title=\"Edit critere\"\r\n                        open={modalEditCritereOpen}  \r\n                        close={closeModalEditCritere}\r\n                        mainAction={saveCritere}\r\n                        selectedCritere={selectedCritere}\r\n                    />\r\n\r\n                    <ModalEditEdge\r\n                        title=\"Edit Edge\"\r\n                        open={modalEditEdgeOpen}  \r\n                        close={closeModalEditEdge}\r\n                        mainAction={saveEdge}\r\n                        selectedEdge={selectedEdge}\r\n                    />\r\n\r\n                    <ModalEditMethod\r\n                        title=\"Edit Method\"\r\n                        open={modalEditMethodOpen}  \r\n                        close={closeModalEditMethod}\r\n                        mainAction={saveMethod}\r\n                        selectedMethod={selectedMethod}\r\n                        initialTree={initialTree}\r\n                    />\r\n\r\n                    <ModalEditEndNode\r\n                        title=\"Edit End node\"\r\n                        open={modalEditEndNodeOpen}  \r\n                        close={closeModalEditEndNode}\r\n                        mainAction={saveEndNode}\r\n                        selectedEndNode={selectedEndNode}\r\n                    />\r\n\r\n                    <ModalWarning\r\n                        message={errorMessage}\r\n                        open={modalWarningOpen}  \r\n                        close={closeModalWarning}\r\n                    />\r\n\r\n                    <ModalInformation\r\n                        open={modalInformationOpen}  \r\n                        close={closeModalInformation}\r\n                    />\r\n\r\n                    <ModalConfirmation\r\n                        title=\"Warning\"\r\n                        message={messageConfirmation}\r\n                        open={modalConfirmationOpen}  \r\n                        close={closeConfirmationModal}\r\n                        mainAction={deleteElement}\r\n                        mainActionParameters={selectedConfirmationElement}\r\n                        mainActionName=\"Delete\"\r\n                    />\r\n                </ReactFlowProvider>\r\n            : <Loader/> \r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Tree;\r\n","import React, {useEffect} from \"react\";\r\nimport $ from 'jquery';\r\n\r\nfunction ModalEditRole(props) {\r\n\r\n    function customFunction() {\r\n        props.mainAction(props.mainActionParameters)\r\n        closeModal();\r\n    }\r\n\r\n    function changeValue(e) {\r\n        props.changeAction(e.target.value);\r\n    }\r\n\r\n    function closeModal() {\r\n        $('.ModalEditRole').css(\"display\", \"none\");\r\n        props.close();\r\n    }\r\n\r\n    function openModal() {\r\n        $('.ModalEditRole').css(\"display\", \"block\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            openModal();\r\n        }\r\n    }, [props.open]);\r\n\r\n    return (\r\n        <div className=\"Modal ModalEditRole\">\r\n            <div>\r\n                <h3>{props.title}</h3>\r\n                <p>{props.message}</p>\r\n                <div>\r\n                    <select id=\"select\" onChange={changeValue}>\r\n                        <option id=\"option\" value=\"administrator\">Administrator</option>\r\n                        <option id=\"option\" value=\"user\">User</option>\r\n                        <option id=\"option\" value=\"super-admin\">Super-administrator</option>\r\n                    </select>\r\n                    <div className=\"action\">\r\n                        <button className=\"button filled\" onClick={customFunction}>{props.actionButton}</button>\r\n                        <button className=\"button outlined\" onClick={closeModal}>{props.closeButton}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalEditRole;\r\n","import React, {useEffect} from \"react\";\r\nimport $ from 'jquery';\r\n\r\nfunction ModalDeleteUser(props) {\r\n\r\n    function customFunction() {\r\n        props.mainAction(props.mainActionParameters)\r\n        closeModal();\r\n    }\r\n\r\n    function closeModal() {\r\n        $('.ModalDeleteUser').css(\"display\", \"none\");\r\n        props.close();\r\n    }\r\n\r\n    function openModal() {\r\n        $('.ModalDeleteUser').css(\"display\", \"block\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            openModal();\r\n        }\r\n    }, [props.open]);\r\n    return (\r\n        <div className=\"Modal ModalDeleteUser\">\r\n            <div>\r\n                <h3>{props.title}</h3>\r\n                <p>{props.message}</p>\r\n                <div>\r\n                    <div className=\"action\">\r\n                        <button className=\"button filled\" onClick={customFunction}>{props.actionButton}</button>\r\n                        <button className=\"button outlined\" onClick={closeModal}>{props.closeButton}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalDeleteUser;\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faEnvelope, faPen, faTrashAlt, faUser, faUserTag} from '@fortawesome/free-solid-svg-icons'\r\nimport ModalEditRole from \"../components/modal/ModalEditRole\";\r\nimport ModalDeleteUser from \"../components/modal/ModalDeleteUser\";\r\nimport Loader from \"../components/Loader\";\r\n\r\nexport class Users extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: null,\r\n            modalEditOpen: false,\r\n            modalDeleteOpen: false,\r\n            idUser: null,\r\n            currentRole: null,\r\n            newRole: \"user\"\r\n        };\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.edit = this.edit.bind(this);\r\n        this.delete = this.delete.bind(this);\r\n        this.handleCloseEdit = this.handleCloseEdit.bind(this);\r\n        this.handleCloseDelete = this.handleCloseDelete.bind(this);\r\n        this.handleClickOpenDelete = this.handleClickOpenDelete.bind(this);\r\n        this.handleClickOpenEdit = this.handleClickOpenEdit.bind(this);\r\n    }\r\n\r\n    handleClickOpenEdit(id, role) {\r\n        this.setState({modalEditOpen: true, idUser: id, currentRole: role}, function () {\r\n        });\r\n\r\n    };\r\n\r\n    handleCloseEdit() {\r\n        this.setState({modalEditOpen: false});\r\n    };\r\n\r\n    handleClickOpenDelete() {\r\n        this.setState({modalDeleteOpen: true});\r\n    };\r\n\r\n    handleCloseDelete() {\r\n        this.setState({modalDeleteOpen: false});\r\n    };\r\n\r\n    handleChange(role) {\r\n        this.setState({newRole: role});\r\n    };\r\n\r\n    componentDidMount() {\r\n        if (this.state.users === null) {\r\n            let protocol = window.location.protocol;\r\n            let host = window.location.hostname;\r\n            let url = protocol + '//' + host;\r\n            axios.get(url + '/API/Controllers/utilisateur/lireUtilisateur.php')\r\n            //axios.get(url + 'reactTest/MATUI/API/Controllers/utilisateur/lireUtilisateur.php')\r\n                .then(response => {\r\n                    this.setState({users: response.data});\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    };\r\n\r\n    edit(role) {\r\n        if (this.state.idUser !== null && role !== null) {\r\n            let protocol = window.location.protocol;\r\n            let host = window.location.hostname;\r\n            let url = protocol + '//' + host;\r\n            let data = JSON.stringify({id_utilisateur: this.state.idUser, role: role});\r\n            axios({\r\n                method: 'put',\r\n                url: url + '/API/Controllers/utilisateur/modifierUtilisateur.php',\r\n                // url: url + '/API/Controllers/utilisateur/modifierUtilisateur.php',\r\n                data: data\r\n            })\r\n                .then(response => {\r\n                    axios.get(url +'/API/Controllers/utilisateur/lireUtilisateur.php')\r\n                    //axios.get(url +'/API/Controllers/utilisateur/lireUtilisateur.php')\r\n                        .then(response => {\r\n                            this.setState({users: response.data});\r\n                        })\r\n                        .catch(error => console.log(error))\r\n                    this.handleCloseEdit();\r\n                })\r\n                .catch(function (erreur) {\r\n                    console.log(erreur);\r\n                });\r\n        }\r\n    }\r\n\r\n    delete = (id) => {\r\n        if (id !== null) {\r\n            let protocol = window.location.protocol;\r\n            let host = window.location.hostname;\r\n            let url = protocol + '//' + host;\r\n            let data = JSON.stringify({id: Number(id)});\r\n            axios({\r\n                method: 'delete',\r\n                url: url+ '/API/Controllers/utilisateur/supprimerUtilisateur.php',\r\n                //url: url+ '/API/Controllers/utilisateur/supprimerUtilisateur.php',\r\n                data: data\r\n            })\r\n                .then(response => {\r\n                    axios.get(url+ '/API/Controllers/utilisateur/lireUtilisateur.php')\r\n                    //axios.get(url + '/API/Controllers/utilisateur/lireUtilisateur.php')\r\n                        .then(response => {\r\n                            this.setState({users: response.data});\r\n                        })\r\n                        .catch(error => console.log(error))\r\n                    this.handleCloseDelete();\r\n                })\r\n                .catch(function (erreur) {\r\n                    console.log(erreur);\r\n                });\r\n        }\r\n    }\r\n\r\n\r\n    chargeData() {\r\n        let listItems = [];\r\n        for (let i in this.state.users) {\r\n            if (this.state.users.hasOwnProperty(i)) {\r\n                let child = [];\r\n                child.push(<div key={i} className=\"row\">\r\n                    <p title={this.state.users[i]['Pseudo']}>{this.state.users[i]['Pseudo']}</p>\r\n                    <p title={this.state.users[i]['Mail']}>{this.state.users[i]['Mail']}</p>\r\n                    <p title={this.state.users[i]['Role']}>{this.state.users[i]['Role']}</p>\r\n\r\n                    <FontAwesomeIcon icon={faPen}\r\n                                     onClick={this.handleClickOpenEdit.bind(this, this.state.users[i]['ID_Utilisateur'], this.state.users[i]['Role'])}/>\r\n\r\n                    <ModalEditRole\r\n                        title={this.state.users[i]['Pseudo'] + \" is currently \" + this.state.users[i]['Role']}\r\n                        message=\"New role : \"\r\n                        actionButton=\"Confirm\"\r\n                        closeButton=\"Quit\"\r\n                        open={this.state.modalEditOpen}\r\n                        close={this.handleCloseEdit}\r\n                        mainAction={this.edit.bind(this)}\r\n                        changeAction={this.handleChange.bind(this)}\r\n                        mainActionParameters={this.state.newRole}\r\n                    />\r\n\r\n                    <FontAwesomeIcon icon={faTrashAlt} onClick={this.handleClickOpenDelete}/>\r\n\r\n\r\n                    <ModalDeleteUser\r\n                        title=\"Warning\"\r\n                        message=\"Are you sure you want to delete this user ?\"\r\n                        actionButton=\"Yes\"\r\n                        closeButton=\"No\"\r\n                        open={this.state.modalDeleteOpen}\r\n                        close={this.handleCloseDelete}\r\n                        mainAction={this.delete.bind(this)}\r\n                        mainActionParameters={this.state.users[i]['ID_Utilisateur']}\r\n                    />\r\n\r\n                </div>)\r\n                listItems.push(child);\r\n            }\r\n        }\r\n        return listItems;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.users === null) return (<Loader/>);\r\n        else {\r\n            return (\r\n                <div className=\"Users\">\r\n                    <div className=\"container\">\r\n                        <div className=\"header\">\r\n                            <p><FontAwesomeIcon icon={faUser}/>Username</p>\r\n                            <p><FontAwesomeIcon icon={faEnvelope}/>Mail</p>\r\n                            <p><FontAwesomeIcon icon={faUserTag}/>Role</p>\r\n                        </div>\r\n                        {this.chargeData()}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default Users;\r\n\r\n","export default __webpack_public_path__ + \"static/media/pdf.87027eba.svg\";","export default __webpack_public_path__ + \"static/media/doc.4d1d10df.svg\";","import React, {useEffect, useState} from \"react\";\r\nimport $ from 'jquery';\r\nimport axios from 'axios';\r\nimport pdf from '../public/pdf.svg'\r\nimport doc from '../public/doc.svg'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faUpload, faTrash } from '@fortawesome/free-solid-svg-icons';\r\nimport ModalConfirmation from '../components/modal/ModalConfirmation';\r\n\r\nfunction FileUpload(props) {\r\n    const [file, setFile] = useState(null);\r\n    const [allFiles, setAllFiles] = useState(null);\r\n\r\n    // appel la fonction d'upload de fichier avec en parametre le fichier contenu dans file\r\n    function onSubmit(e) {\r\n        e.preventDefault()\r\n        uploadFile(file);\r\n    }\r\n\r\n    // stock le fichier dans la variable file\r\n    function onChange(e) {\r\n        setFile(e.target.files[0]);\r\n    }\r\n\r\n    // requete d'upload du fichier\r\n    function uploadFile(file) {\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n        axios.post(url + '/API/Controllers/ressource/uploadFile.php', formData, {\r\n            headers: {\r\n                'content-type': 'multipart/form-data'\r\n            }\r\n        }).then(response =>{\r\n            if(response.data.Error){\r\n                alert(response.data.Error);\r\n            }   \r\n            // recharge les fichiers et reset la variable file\r\n            loadFiles();\r\n            setFile(null);\r\n        }).catch(error =>{\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    // ouvre un fichier stocké sur le serveur\r\n    function openFile(name){\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n        window.open(url+ '/API/documentsRessources/' + name);\r\n    }\r\n\r\n    // supprime un fichier\r\n    function deleteFile(id){\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n        let data = JSON.stringify({id: Number(id)});\r\n        console.log(data);\r\n        axios({\r\n            method: 'delete',\r\n            url: url+ '/API/Controllers/ressource/supprimerRessource.php',\r\n            data: data\r\n        }).then(response => loadFiles())\r\n    }\r\n\r\n    // charge les fichiers\r\n    function loadFiles(){\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n        axios.get(url + '/API/Controllers/ressource/lire.php')\r\n        .then(response =>{\r\n            setAllFiles(response.data.ressources)\r\n        });\r\n    }\r\n\r\n    function getIcon(filename){\r\n        let src = filename.slice(-3);\r\n        let test = false;\r\n        (src == \"pdf\" ? test = true : test = false);\r\n        switch(test){\r\n            case true:\r\n                return pdf;\r\n            case false:\r\n                return doc;\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(file){\r\n            $(\"form>label\").html(file.name);\r\n            $(\"form>label\").css(\"color\", \"black\");\r\n        } else {\r\n            $(\"form>label\").html(\"Import file...\");\r\n            $(\"form>label\").css(\"color\", \"lightgray\");\r\n        }\r\n    }, [file]);\r\n\r\n    useEffect(() => {\r\n        if(!allFiles){\r\n            loadFiles();\r\n        }\r\n    }, []);\r\n\r\n    // Modal management\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [message, setMessage] = useState(null);\r\n    const [selectedElement, setSelectedElement] = useState(null);\r\n\r\n    function openModal(element) {\r\n        setModalOpen(true);\r\n        setMessage(\"Do you want to delete \" + element.Nom + \" ?\")\r\n        setSelectedElement(element.ID_Ressource)\r\n    }\r\n\r\n    function closeModal(){\r\n        setModalOpen(false);\r\n    }\r\n\r\n    return (\r\n        <div className=\"FileUpload\">\r\n            <div>\r\n                <form onSubmit={onSubmit}>\r\n                    <button className=\"filled submit-button\" type=\"submit\">                        \r\n                        <FontAwesomeIcon icon={faUpload} />\r\n                    </button>\r\n                    <label htmlFor=\"file-upload\">Import file...</label>\r\n                    <input id=\"file-upload\" type=\"file\" onChange={onChange}/>\r\n                </form>\r\n                <h3> List of files already uploaded :</h3>\r\n                {allFiles &&\r\n                    <div className=\"item-list\">\r\n                        {allFiles.map((element, i) => {   \r\n                            return (<div className=\"item\" title={element.Nom} key={i}>\r\n                                <p onClick={() => openModal(element)}><FontAwesomeIcon icon={faTrash} /></p>\r\n                                <img onClick={() => openFile(element.Nom)} src={getIcon(element.Nom)} alt=\"icon pdf\"/>\r\n                                <p onClick={() => openFile(element.Nom)}>{element.Nom}</p>\r\n                                </div>\r\n                            ) \r\n                            \r\n                        })}    \r\n                    </div>\r\n                }  \r\n            </div>\r\n\r\n            <ModalConfirmation\r\n                title=\"Warning\"\r\n                message={message}\r\n                open={modalOpen}  \r\n                close={closeModal}\r\n                mainAction={deleteFile}\r\n                mainActionParameters={selectedElement}\r\n                mainActionName=\"Delete\"\r\n            />\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileUpload;\r\n","import React, {useEffect, useState} from 'react';\r\n\r\nimport $ from 'jquery';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faChartPie, faClipboard, faFilePdf, faFolderOpen, faSortDown, faUsers} from '@fortawesome/free-solid-svg-icons'\r\nimport axios from \"axios\";\r\n\r\nfunction DropMethodCard(props) {\r\n\r\n    const [ressources, setRessources] = useState(null);\r\n\r\n\r\n    function getRessources() {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        const json = JSON.stringify({id_methode: Number(props.method.ID_Methode)});\r\n        axios.post(url + '/API/Controllers/ressource/lireRessourcesMethode.php', json)\r\n            .then(response => {\r\n                setRessources(response.data);\r\n            })\r\n            .catch(error => console.log(error))\r\n    }\r\n\r\n    useEffect(() => {\r\n        getRessources();\r\n    }, []);\r\n\r\n\r\n    function openFile(name) {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n        window.open(url+ '/API/documentsRessources/' + name);\r\n    }\r\n\r\n    function dropCard(e) {\r\n        let parentId = e.currentTarget.parentElement.id;\r\n        console.log(parentId)\r\n        $(\"#\" + parentId).toggleClass('dropped');\r\n    }\r\n\r\n    return (\r\n        <div className=\"Method\">\r\n            <div id={props.id} className=\"methodCard dropDown\">\r\n                <div className=\"header\">\r\n                    <div className=\"informations\">\r\n                        <h3>{props.method.Libelle}</h3>\r\n                        <p>{props.method.Description}</p>\r\n                        <div>\r\n                            <div>\r\n                                <FontAwesomeIcon className=\"icon\" icon={faUsers} />  \r\n                                <p>workforce</p> \r\n                                <p>{props.method.Effectif_preconise}</p>\r\n                            </div>\r\n                            <div>\r\n                                <FontAwesomeIcon className=\"icon\" icon={faFolderOpen} />  \r\n                                <p>produced data</p> \r\n                                <p>{props.method.Donnees_produites}</p>\r\n                            </div>\r\n                            <div>\r\n                                <FontAwesomeIcon className=\"icon\" icon={faClipboard} />  \r\n                                <p>method</p>\r\n                                <p>{props.method.Type_methode}</p>\r\n                            </div>\r\n                            <div>\r\n                                <FontAwesomeIcon className=\"icon\" icon={faChartPie}/>\r\n                                <p>analysis</p>\r\n                                <p>{props.method.Type_analyse}</p>\r\n                            </div>\r\n                        </div>\r\n                        <p>{props.method.Exemple}</p>\r\n                    </div>\r\n                    {ressources ?\r\n                        <div className=\"ressources\">\r\n                            {ressources.map((element, i) => {\r\n                                return (<div onClick={() => openFile(element.Nom)} key={i} className=\"ressource\">\r\n                                    <FontAwesomeIcon className=\"icon\" icon={faFilePdf}/>\r\n                                    <p>{element.Nom}</p>\r\n                                </div>)\r\n                            })}\r\n                        </div>\r\n                        : <p>No ressources</p>\r\n                    }\r\n                </div>\r\n                <div onClick={(e) => dropCard(e)} className=\"deploy\">\r\n                    <FontAwesomeIcon icon={faSortDown}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DropMethodCard;\r\n","import React from 'react';\r\nimport DropMethodCard from '../components/quiz/DropMethodCard';\r\nimport axios from \"axios\";\r\n\r\nexport class Summary extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            retainedMethods: null,\r\n            resume: null,\r\n            amount: null,\r\n            endMessage: null\r\n        };\r\n    }\r\n\r\n    // renvoie sur la page d'accueil\r\n    goToHome = () => {\r\n        this.props.history.push({\r\n            pathname: '/home'\r\n        })\r\n    }\r\n\r\n    // charge et vérifie les data passé en props\r\n    componentDidMount() {\r\n        if (this.props.location.state.retainedMethods.length) {\r\n            this.setState({\r\n                retainedMethods: this.props.location.state.retainedMethods,\r\n                amount: this.props.location.state.retainedMethods.length\r\n            });\r\n        } else {\r\n            this.setState({amount: 0});\r\n        }\r\n        if (this.state.endMessage === null) {\r\n            // récupère le message de fin\r\n            let protocol = window.location.protocol;\r\n            let host = window.location.hostname;\r\n            let url = protocol + '//' + host;\r\n            axios.get(url + '/API/Controllers/sortie/lireSortie.php')\r\n                .then(response => {\r\n                    this.setState({endMessage: response.data['message']})\r\n                })\r\n                .catch(error => console.log(error))\r\n\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"Summary\">\r\n                <div>\r\n                    <h3>You have retained {this.state.amount} method{this.state.amount > 1 ? \"s\" : \"\"}</h3>\r\n                    {this.state.retainedMethods ?\r\n                        <ul>\r\n                            {this.state.retainedMethods.map((element, i) => {\r\n                                return (\r\n                                    <li key={i}>\r\n                                        <DropMethodCard method={element.method}\r\n                                                        id={i + 1}\r\n                                        />\r\n                                    </li>\r\n                                )\r\n                            })}\r\n                        </ul>\r\n                        :\r\n                        <p></p>\r\n                    }\r\n                </div>\r\n                <div>\r\n                    {this.state.endMessage ?\r\n                        <div className=\"messageCard\">\r\n                            <p>{this.state.endMessage}</p>\r\n                        </div>\r\n                        :\r\n                        <p></p>\r\n                    }\r\n\r\n                    <button onClick={this.goToHome} className=\"button filled\">Back home</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Summary;\r\n","export default __webpack_public_path__ + \"static/media/robotError.ca706ba4.svg\";","import React from 'react';\r\nimport robotError from '../public/robotError.svg'\r\n\r\n\r\nfunction Warning() {    \r\n    return (\r\n        <div className=\"Warning\">\r\n            <div>\r\n                <img src={robotError} alt=\"logo error\"/>\r\n            </div>\r\n            <p>This website is only viewable in landscape mode</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Warning;\r\n","export function removeItem(itemToRemove){\r\n    window.localStorage.removeItem(itemToRemove);\r\n}\r\n\r\nexport function getItem(item){\r\n    return window.localStorage.getItem(item);\r\n} \r\n\r\nexport function addItem(localStorageName, newItem){\r\n    window.localStorage.setItem(localStorageName, newItem);\r\n}","import axios from 'axios';\r\nimport jwt_decode from \"jwt-decode\";\r\nimport {addItem, getItem, removeItem} from \"./LocalStorage\";\r\n\r\n//Vérifie la connexion avec le token\r\nexport function hasAuthenticated() {\r\n \r\n    const token = getItem('token');\r\n    const result = token ? tokenIsValid(token) : false;\r\n    if (false === result) {\r\n        removeItem('token');\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function isUser(){\r\n    const token = getItem('token');\r\n    const result = token ? tokenIsValid(token) : false;\r\n    if (false === result) {\r\n        removeItem('token');\r\n        return false;\r\n    }\r\n    if(true === result) {\r\n        return getRole(token);\r\n    }\r\n    return false;\r\n}\r\n\r\n//Récup du role du token décodé\r\nexport function getRole(token){\r\n    const tokenResult = decodeToken(token);\r\n    return tokenResult['user_role'];\r\n}\r\n\r\n//Récupération du token + mise en localStorage\r\nexport function login(credentials) {\r\n    let protocol = window.location.protocol;\r\n    let host = window.location.hostname;\r\n    let url = protocol + '//' + host;\r\n    return axios\r\n        .post(url + '/API/Controllers/connexion.php', credentials)\r\n        .then(response => response.data.token)\r\n        .then(token => {\r\n            if(token !== undefined){\r\n                addItem('token', token);\r\n                return true;\r\n            }\r\n            else return false;\r\n        });\r\n}\r\n//Supprime le token du localSTorage\r\nexport function logout() {\r\n    removeItem('token');\r\n}\r\n\r\n//Verifie validité du token (avec temps d'expiration)\r\nfunction tokenIsValid(token) {\r\n    const decoded = jwt_decode(token);\r\n    const exp = decoded['exp']\r\n    return exp * 1000 > new Date().getTime();\r\n}\r\n\r\n//Traduit le token pour récupérer les infos\r\nfunction decodeToken(token){\r\n    return jwt_decode(token);\r\n}","import React, {useContext, useState} from 'react';\r\nimport Auth from \"../contexts/Auth\";\r\nimport {login, isUser} from \"../services/AuthApi\";\r\nimport 'font-awesome/css/font-awesome.min.css';\r\n\r\nconst Login = (props) => {\r\n\r\n    //Utilisation du contexte pour vérifier les états de connexion\r\n    const {setIsAuthenticated, setUserRole } = useContext(Auth);\r\n\r\n    const [user, setUser] = useState({\r\n        username: \"\",\r\n        mot_de_passe: \"\"\r\n    });\r\n\r\n    // set les informations récupérer des inputs dans une variable\r\n    const handleChange = ({currentTarget}) => {\r\n        const {name, value} = currentTarget;\r\n        setUser({...user, [name]: value})\r\n    }\r\n\r\n    // envoie les informations de connexion a la fonction login de AuthApi\r\n    const handleSubmit = async event => {\r\n        event.preventDefault();\r\n\r\n        //Set les états du contexte quand on est connecté\r\n        try {\r\n            const response = await login(user);\r\n            if(response === false){\r\n                props.history.push({\r\n                    pathname: '/login',\r\n                    state: { error: \"Error, incorrect password or username\" }\r\n                })\r\n            }\r\n            else {\r\n                setIsAuthenticated(response);\r\n                let userRole = isUser();\r\n                if(userRole){\r\n                    setUserRole(userRole)\r\n                }\r\n                props.history.push('/quiz')\r\n            }\r\n\r\n        } catch ({response}) {\r\n            console.log(response);\r\n            props.history.push({\r\n                pathname: '/login',\r\n                state: { error: \"Error, incorrect password or username.\" }\r\n            })\r\n        }\r\n    }\r\n\r\n    // renvoie sur la page register\r\n    const change = () => {\r\n        props.history.push('/register')\r\n    }\r\n\r\n    return (\r\n        <div className=\"LoginRegister\">\r\n            <div>\r\n                <h3>Sign in</h3>\r\n                <div className=\"InputItems\">\r\n                    <div>\r\n                        <input className =\"inputIcon\" type=\"text\" id=\"username\" name=\"username\" required placeholder=\"    Username\"\r\n                            onChange={handleChange}/>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <input className =\"inputIcon\" type=\"password\" id=\"password\" name=\"mot_de_passe\" required placeholder={\"    Password\"}\r\n                            onChange={handleChange}/>\r\n                    </div>\r\n                </div>\r\n                {props.location.state &&(<p className=\"error\">{props.location.state.error}</p>)}\r\n\r\n                <div className=\"action\">\r\n                    <button className=\"button filled\" onClick={handleSubmit}>Sign in</button>\r\n                </div>\r\n\r\n                <div className=\"signup\">\r\n                    <p>Don't have an account ? <a onClick={change}>Create one now</a></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport { useHistory } from \"react-router\";\r\n\r\nfunction Register() {\r\n    const [username, setUsername] = useState(\"\");\r\n    const [mail, setMail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\r\n    const [errorPseudo, setErrorPseudo] =useState(null);\r\n    const [errorMail, setErrorMail] =useState(null);\r\n    const history = useHistory();\r\n\r\n    // enregistre un nouveau compte\r\n    function register() {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        if (username !== \"\" && mail !== \"\" && password !== \"\" && passwordConfirmation !== \"\" && password === passwordConfirmation) {\r\n            const json = JSON.stringify({mail: mail, pseudo: username, mot_de_passe: password});\r\n            axios.post(url + '/API/Controllers/utilisateur/creerUtilisateur.php', json)\r\n                // axios.post(url + '/API/Controllers/connexion.php', json)\r\n                .then(response => {\r\n                    if(response.data.ErrorPseudo){\r\n                        setErrorPseudo(response.data.ErrorPseudo);\r\n                    }\r\n                    else if(response.data.ErrorMail){\r\n                        setErrorMail(response.data.ErrorMail);\r\n                    }\r\n                    else {\r\n                        history.push({\r\n                            pathname:  \"/login\",\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"LoginRegister\">\r\n            <div>\r\n                <h3>Sign up</h3>\r\n                <div className=\"InputItems\">\r\n                    <div>\r\n                        <input type=\"text\" id=\"username\" name=\"username\" required placeholder=\"     Username\"\r\n                               onChange={e => setUsername(e.target.value)}/>\r\n                        {errorPseudo &&(<p className=\"error\">{errorPseudo}</p>)}\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"mail\" id=\"mail\" name=\"mail\" required placeholder=\"     Mail\"\r\n                               onChange={e => setMail(e.target.value)}/>\r\n                        { errorMail &&(<p className=\"error\">{errorMail}</p>)}\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"password\" id=\"password\" name=\"password\" required placeholder=\"     Password\"\r\n                               onChange={e => setPassword(e.target.value)}/>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <input type=\"password\" id=\"passwordConfirmation\" name=\"passwordConfirmation\" required\r\n                               placeholder={\"     Confirm password\"}\r\n                               onChange={e => setPasswordConfirmation(e.target.value)}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"action\">\r\n                    <button className=\"button filled\" onClick={register}>Sign up</button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n","export default __webpack_public_path__ + \"static/media/quiz.efa23dcf.svg\";","import React, {useContext} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport quizIcon from \"../public/quiz.svg\";\r\nimport logoTitle from \"../public/LogoThedreTitle.png\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {\r\n    faFileUpload,\r\n    faHome,\r\n    faProjectDiagram,\r\n    faUser,\r\n    faUserCog,\r\n    faSignOutAlt\r\n} from '@fortawesome/free-solid-svg-icons'\r\nimport Auth from \"../contexts/Auth\";\r\nimport {logout} from \"../services/AuthApi\";\r\n\r\nconst Nav = () => {\r\n    const {isAuthenticated, setIsAuthenticated} = useContext(Auth);\r\n    const {userRole, setUserRole} = useContext(Auth);\r\n\r\n    const handleLogout = () => {\r\n        logout();\r\n        setIsAuthenticated(false);\r\n        setUserRole(null);\r\n    };\r\n    return (\r\n        <div className=\"Navigation\">\r\n            <div>\r\n                <img src={logoTitle} alt={'Logo Thedre'}/>\r\n                <nav>\r\n                    <ul>\r\n                        <Link title=\"home\" to=\"/\">\r\n                            <li><FontAwesomeIcon className=\"icon\" icon={faHome}/></li>\r\n                        </Link>\r\n                        <Link title=\"quiz\" to=\"/quiz\">\r\n                            <li><img className=\"icon quizIcon\" src={quizIcon} alt={'icon quiz'}/></li>\r\n                        </Link>\r\n\r\n                        {!isAuthenticated && (<>\r\n                            <Link title=\"login\" to=\"/login\">\r\n                                <li><FontAwesomeIcon className=\"icon\" icon={faUser}/></li>\r\n                            </Link>\r\n                        </>)}\r\n\r\n                        {userRole === 'administrator' && (<> <Link title=\"tree management\" to=\"/manageTree\">\r\n                            <li><FontAwesomeIcon className=\"icon\" icon={faProjectDiagram}/></li>\r\n                        </Link>\r\n\r\n                            <Link title=\"file uploading\" to=\"/fileUpload\">\r\n                                <li><FontAwesomeIcon className=\"icon\" icon={faFileUpload}/></li>\r\n                            </Link></>)}\r\n\r\n                        {userRole === 'super-admin' && (<>\r\n                            <Link title=\"tree management\" to=\"/manageTree\">\r\n                                <li><FontAwesomeIcon className=\"icon\" icon={faProjectDiagram}/></li>\r\n                            </Link>\r\n                            <Link title=\"users management\" to=\"/manageUsers\">\r\n                                <li><FontAwesomeIcon className=\"icon\" icon={faUserCog}/></li>\r\n                            </Link>\r\n                            <Link title=\"file uploading\" to=\"/fileUpload\">\r\n                                <li><FontAwesomeIcon className=\"icon\" icon={faFileUpload}/></li>\r\n                            </Link>\r\n                        </>)}\r\n\r\n                        {isAuthenticated && (<>\r\n                            <Link className='logout' title=\"logout\" to=\"/logout\">\r\n                                <li onClick={handleLogout}><FontAwesomeIcon className=\"logoutIcon\" icon={faSignOutAlt}/></li>\r\n                            </Link>\r\n                        </>)}\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Nav;\r\n","export default \"data:image/png;base64,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\"","import React, {useContext} from 'react';\r\nimport Auth from \"../contexts/Auth\";\r\nimport {Redirect, Route} from \"react-router-dom\";\r\n\r\nconst AuthenticatedRoute = ({path, component}) => {\r\n    const {isAuthenticated} = useContext(Auth);\r\n    const {userRole} = useContext(Auth);\r\n    if(isAuthenticated){\r\n        switch(userRole){\r\n            case 'user':\r\n                // accès a rien\r\n                return <Redirect to=\"/\"/>\r\n            case 'administrator':\r\n                // accès a l'arbre uniquement\r\n                if(path === '/manageTree' || path === '/fileUpload'){\r\n                    return <Route path={path} component={component}/> \r\n                } else {\r\n                    return <Redirect to=\"/\"/>\r\n                }\r\n            case 'super-admin':\r\n                // accès a tout\r\n                return <Route path={path} component={component}/> \r\n        }\r\n    } else {\r\n        return <Redirect to=\"/login\"/>\r\n    }\r\n}\r\nexport default AuthenticatedRoute; ","import './App.scss';\r\nimport React, {useState} from 'react';\r\nimport {BrowserRouter as Router, Redirect, Route, Switch} from 'react-router-dom';\r\nimport Home from './views/Home';\r\nimport Quiz from './views/Quiz';\r\nimport Tree from './views/Tree';\r\nimport Users from './views/Users';\r\nimport FileUpload from './views/FileUpload';\r\nimport Summary from './views/Summary';\r\nimport Warning from './components/Warning'\r\nimport Login from './views/Login';\r\nimport Register from './views/Register';\r\nimport Nav from './components/Nav';\r\nimport Auth from \"./contexts/Auth\"\r\nimport AuthenticatedRoute from \"./components/AuthenticatedRoute\";\r\nimport {hasAuthenticated, isUser} from \"./services/AuthApi\";\r\n\r\n/**\r\n * @Goal : Router : change the browser URL and return the right component\r\n * @UsedByModule : index.js\r\n * @ModuleUsed : Home, Quiz, Summary, Login, Register, Tree, Users\r\n * @VisibleVariables :\r\n * @VisibleProcedures :\r\n * @returns {JSX.Element} the right component depending on browser URL\r\n */\r\nfunction App() {\r\n\r\n    /**\r\n     * Setup state for auth and role\r\n     */\r\n    const [isAuthenticated, setIsAuthenticated] = useState(hasAuthenticated());\r\n    const [userRole, setUserRole] = useState(isUser());\r\n\r\n    /**\r\n     * Render the right component according to state\r\n     */\r\n    return (\r\n        //Provider to share state to all levels\r\n        <Auth.Provider value={{\r\n            isAuthenticated, setIsAuthenticated, userRole, setUserRole\r\n        }}>\r\n            <Router>\r\n                <div className=\"App\">\r\n                    <Nav/>\r\n                    <Switch>\r\n                        <Route path=\"/\" exact component={Home}/>\r\n                        <Route path=\"/quiz\" exact component={Quiz}/>\r\n                        <Route path=\"/summary\" exact component={Summary}/>\r\n                        <Route path=\"/login\" exact component={Login}/>\r\n                        <Route path=\"/register\" exact component={Register}/>\r\n                        <AuthenticatedRoute path=\"/manageTree\" component={Tree}/>\r\n                        <AuthenticatedRoute path=\"/manageUsers\" component={Users}/>\r\n                        <AuthenticatedRoute path=\"/fileUpload\" component={FileUpload}/>\r\n                        <Redirect to=\"/\"/> {/* Redirect to home when invalid url */}\r\n                    </Switch>\r\n                </div>\r\n                <Warning/>\r\n            </Router>\r\n        </Auth.Provider>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App/>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}
{"ast":null,"code":"import _slicedToArray from\"C:/wamp64/www/Projet_TER/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import'font-awesome/css/font-awesome.min.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(_ref){var history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),mail=_useState4[0],setMail=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),mailErrorMessage=_useState6[0],setMailErrorMessage=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),pseudoErrorMessage=_useState8[0],setPseudoErrorMessage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),password=_useState10[0],setPassword=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),passwordConfirmation=_useState12[0],setPasswordConfirmation=_useState12[1];var register=function register(){var protocol=window.location.protocol;var host=window.location.hostname;var url=protocol+'//'+host;if(username!==\"\"&&mail!==\"\"&&password!==\"\"&&passwordConfirmation!==\"\"&&password===passwordConfirmation){axios.post(url+'/API/Controllers/utilisateur/creerUtilisateur.php',{mail:mail,pseudo:username,mot_de_passe:password}).then(function(response){console.log(response.data);if(response.data['ErrorMail']){setMailErrorMessage(response.data['ErrorMail']);}else setMailErrorMessage(null);if(response.data['ErrorPseudo']){setPseudoErrorMessage(response.data['ErrorPseudo']);}else setPseudoErrorMessage(null);window.location.href='/login';history.replace('/login');}).catch(function(error){return console.log(error);});}};return/*#__PURE__*/_jsx(\"div\",{className:\"LoginRegister\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sign up\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"InputItems\",children:[/*#__PURE__*/_jsx(\"div\",{children:pseudoErrorMessage?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{className:\"ErrorInput\",id:\"username\",name:\"username\",required:true,placeholder:\"\\uF007     Username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{className:\"ErrorMessage\",children:pseudoErrorMessage})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",required:true,placeholder:\"\\uF007     Username\",onChange:function onChange(e){return setUsername(e.target.value);}})})}),/*#__PURE__*/_jsx(\"div\",{children:mailErrorMessage?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{className:\"ErrorInput\",type:\"mail\",id:\"mail\",name:\"mail\",required:true,placeholder:\"\\uF0E0     Mail\",onChange:function onChange(e){return setMail(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{className:\"ErrorMessage\",children:mailErrorMessage})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"input\",{type:\"mail\",id:\"mail\",name:\"mail\",required:true,placeholder:\"\\uF0E0     Mail\",onChange:function onChange(e){return setMail(e.target.value);}})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",required:true,placeholder:\"\\uF023     Password\",onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"passwordConfirmation\",name:\"passwordConfirmation\",required:true,placeholder:\"     Confirm password\",onChange:function onChange(e){return setPasswordConfirmation(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"action\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button filled\",onClick:register,children:\"Sign up\"})})]})});};export default Register;","map":{"version":3,"sources":["C:/wamp64/www/Projet_TER/src/views/Register.js"],"names":["React","useState","axios","Register","history","username","setUsername","mail","setMail","mailErrorMessage","setMailErrorMessage","pseudoErrorMessage","setPseudoErrorMessage","password","setPassword","passwordConfirmation","setPasswordConfirmation","register","protocol","window","location","host","hostname","url","post","pseudo","mot_de_passe","then","response","console","log","data","href","replace","catch","error","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport 'font-awesome/css/font-awesome.min.css';\r\n\r\nconst Register = ({history}) => {\r\n    const [username, setUsername] = useState(\"\");\r\n    const [mail, setMail] = useState(\"\");\r\n    const [mailErrorMessage, setMailErrorMessage] = useState(null);\r\n    const [pseudoErrorMessage, setPseudoErrorMessage] = useState(null);\r\n    const [password, setPassword] = useState(\"\");\r\n    const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\r\n\r\n\r\n\r\n    const register= ()=> {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        if (username !== \"\" && mail !== \"\" && password !== \"\" && passwordConfirmation !== \"\" && password === passwordConfirmation) {\r\n\r\n            axios.post(url + '/API/Controllers/utilisateur/creerUtilisateur.php', {mail: mail, pseudo: username, mot_de_passe: password})\r\n                .then(response => {\r\n                    console.log(response.data);\r\n                    if (response.data['ErrorMail']) {\r\n                        setMailErrorMessage(response.data['ErrorMail']);\r\n                    }\r\n                    else setMailErrorMessage(null);\r\n                    if (response.data['ErrorPseudo']) {\r\n                        setPseudoErrorMessage(response.data['ErrorPseudo']);\r\n                    }else setPseudoErrorMessage(null);\r\n                    window.location.href = '/login'\r\n                    history.replace('/login');\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"LoginRegister\">\r\n            <div>\r\n                <h3>Sign up</h3>\r\n                <div className=\"InputItems\">\r\n                    <div>\r\n                        {pseudoErrorMessage ? <>\r\n                                <input className={\"ErrorInput\"} id=\"username\" name=\"username\" required\r\n                                       placeholder=\"     Username\"\r\n                                       onChange={e => setUsername(e.target.value)}/>\r\n                                <div className={\"ErrorMessage\"}>{pseudoErrorMessage}</div>\r\n                            </>\r\n                            : <>\r\n                                <input type=\"text\" id=\"username\" name=\"username\" required placeholder=\"     Username\"\r\n                                       onChange={e => setUsername(e.target.value)}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                    <div>\r\n                        {mailErrorMessage ? <>\r\n                                <input className={\"ErrorInput\"} type=\"mail\" id=\"mail\" name=\"mail\" required\r\n                                       placeholder=\"     Mail\"\r\n                                       onChange={e => setMail(e.target.value)}/>\r\n                            <div className={\"ErrorMessage\"}>{mailErrorMessage}</div>\r\n                        </> :\r\n                            <>\r\n                                <input type=\"mail\" id=\"mail\" name=\"mail\" required placeholder=\"     Mail\"\r\n                                       onChange={e => setMail(e.target.value)}/>\r\n                            </>}\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"password\" id=\"password\" name=\"password\" required placeholder=\"     Password\"\r\n                               onChange={e => setPassword(e.target.value)}/>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <input type=\"password\" id=\"passwordConfirmation\" name=\"passwordConfirmation\" required\r\n                               placeholder={\"     Confirm password\"}\r\n                               onChange={e => setPasswordConfirmation(e.target.value)}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"action\">\r\n                    <button className=\"button filled\" onClick={register}>Sign up</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default Register;"]},"metadata":{},"sourceType":"module"}
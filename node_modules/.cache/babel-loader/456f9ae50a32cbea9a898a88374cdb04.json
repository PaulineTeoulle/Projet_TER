{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\Projet_TER\\\\src\\\\views\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport Loader from \"../components/Loader\";\nimport logo from \"../public/logothedre.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPen } from \"@fortawesome/free-solid-svg-icons\";\nimport ModalEditHome from \"../components/modal/ModalEditHome\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Auth from \"../contexts/Auth\";\nimport { useHistory } from 'react-router-dom';\nimport axios from \"axios\";\nimport { Link, NavLink } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home() {\n  _s();\n\n  const [description, setDescription] = useState(null);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [newDescription, setNewDescription] = useState(null);\n  const {\n    isAdmin,\n    isSuperAdmin\n  } = useContext(Auth);\n\n  function getHomeContent() {\n    let protocol = window.location.protocol;\n    let host = window.location.hostname;\n    let url = protocol + '//' + host;\n\n    if (description === null) {\n      axios.get(url + '/Projet_TER/API/Controllers/accueil/lire.php') // axios.get(url + '/API/Controllers/accueil/lire.php')\n      .then(response => {\n        setDescription(response.data['description']);\n      }).catch(error => console.log(error));\n    }\n  }\n\n  useEffect(() => {\n    getHomeContent();\n  });\n\n  function handleOpen() {\n    setModalOpen(true);\n  }\n\n  function handleClose() {\n    setModalOpen(false);\n  }\n\n  function handleChange(description) {\n    setNewDescription(description);\n  }\n\n  function edit() {\n    if (newDescription !== null) {\n      let data = JSON.stringify({\n        description: newDescription\n      });\n      let protocol = window.location.protocol;\n      let host = window.location.hostname;\n      let url = protocol + '//' + host;\n      axios.put(url + '/Projet_TER/API/Controllers/accueil/modifier.php', data).then(() => {\n        axios.get(url + '/Projet_TER/API/Controllers/accueil/lire.php').then(response => {\n          setDescription(response.data['description']);\n        }).catch(error => console.log(error));\n        handleClose();\n      }).catch(function (erreur) {\n        console.log(erreur);\n      });\n    }\n\n    handleClose();\n  }\n\n  let history = useHistory();\n\n  const redirect = () => {\n    history.push('/quiz');\n  };\n\n  if (description === null) return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 39\n  }, this);else return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Home\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logo\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: 'Logo Thedre'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        className: \"button filled\",\n        to: \"/quiz\",\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n        to: \"/quiz\",\n        children: \"About\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => redirect,\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Contents\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), isAdmin && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          className: \"icon\",\n          icon: faPen,\n          onClick: handleOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 36\n        }, this), isSuperAdmin && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          className: \"icon\",\n          icon: faPen,\n          onClick: handleOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 40\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalEditHome, {\n        title: \"Modify description\",\n        message: \"Please modify\",\n        oldDescription: description,\n        actionButton: \"Confirm\",\n        closeButton: \"Quit\",\n        open: modalOpen,\n        close: handleClose,\n        mainAction: edit,\n        changeAction: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Home, \"XRe6BwvSKF3835HmBH0qEMMG3ZA=\", false, function () {\n  return [useHistory];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/wamp64/www/Projet_TER/src/views/Home.js"],"names":["Loader","logo","FontAwesomeIcon","faPen","ModalEditHome","React","useContext","useEffect","useState","Auth","useHistory","axios","Link","NavLink","Home","description","setDescription","modalOpen","setModalOpen","newDescription","setNewDescription","isAdmin","isSuperAdmin","getHomeContent","protocol","window","location","host","hostname","url","get","then","response","data","catch","error","console","log","handleOpen","handleClose","handleChange","edit","JSON","stringify","put","erreur","history","redirect","push"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AACA,SAAQC,eAAR,QAA8B,gCAA9B;AACA,SAAQC,KAAR,QAAoB,mCAApB;AACA,OAAOC,aAAP,MAA0B,mCAA1B;AACA,OAAOC,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,IAAR,EAAcC,OAAd,QAA4B,kBAA5B;;;AAEA,SAASC,IAAT,GAAgB;AAAA;;AACZ,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCR,QAAQ,CAAC,IAAD,CAA9C;AACA,QAAM,CAACS,SAAD,EAAYC,YAAZ,IAA4BV,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACW,cAAD,EAAiBC,iBAAjB,IAAsCZ,QAAQ,CAAC,IAAD,CAApD;AACA,QAAM;AAACa,IAAAA,OAAD;AAAUC,IAAAA;AAAV,MAA0BhB,UAAU,CAACG,IAAD,CAA1C;;AAEA,WAASc,cAAT,GAA0B;AACtB,QAAIC,QAAQ,GAAGC,MAAM,CAACC,QAAP,CAAgBF,QAA/B;AACA,QAAIG,IAAI,GAAGF,MAAM,CAACC,QAAP,CAAgBE,QAA3B;AACA,QAAIC,GAAG,GAAGL,QAAQ,GAAG,IAAX,GAAkBG,IAA5B;;AAEA,QAAIZ,WAAW,KAAK,IAApB,EAA0B;AACtBJ,MAAAA,KAAK,CAACmB,GAAN,CAAUD,GAAG,GAAG,8CAAhB,EACA;AADA,OAEKE,IAFL,CAEUC,QAAQ,IAAI;AACdhB,QAAAA,cAAc,CAACgB,QAAQ,CAACC,IAAT,CAAc,aAAd,CAAD,CAAd;AACH,OAJL,EAKKC,KALL,CAKWC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CALpB;AAMH;AACJ;;AAED5B,EAAAA,SAAS,CAAC,MAAM;AACZgB,IAAAA,cAAc;AACjB,GAFQ,CAAT;;AAKA,WAASe,UAAT,GAAsB;AAClBpB,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AAED,WAASqB,WAAT,GAAuB;AACnBrB,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;;AAED,WAASsB,YAAT,CAAsBzB,WAAtB,EAAmC;AAC/BK,IAAAA,iBAAiB,CAACL,WAAD,CAAjB;AACH;;AAED,WAAS0B,IAAT,GAAgB;AACZ,QAAItB,cAAc,KAAK,IAAvB,EAA6B;AACzB,UAAIc,IAAI,GAAGS,IAAI,CAACC,SAAL,CAAe;AAAC5B,QAAAA,WAAW,EAAEI;AAAd,OAAf,CAAX;AACA,UAAIK,QAAQ,GAAGC,MAAM,CAACC,QAAP,CAAgBF,QAA/B;AACA,UAAIG,IAAI,GAAGF,MAAM,CAACC,QAAP,CAAgBE,QAA3B;AACA,UAAIC,GAAG,GAAGL,QAAQ,GAAG,IAAX,GAAkBG,IAA5B;AACAhB,MAAAA,KAAK,CAACiC,GAAN,CAAUf,GAAG,GAAE,kDAAf,EAAkEI,IAAlE,EACKF,IADL,CACU,MAAM;AACRpB,QAAAA,KAAK,CAACmB,GAAN,CAAUD,GAAG,GAAE,8CAAf,EACKE,IADL,CACUC,QAAQ,IAAI;AACdhB,UAAAA,cAAc,CAACgB,QAAQ,CAACC,IAAT,CAAc,aAAd,CAAD,CAAd;AACH,SAHL,EAIKC,KAJL,CAIWC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAJpB;AAKAI,QAAAA,WAAW;AACd,OARL,EASKL,KATL,CASW,UAAUW,MAAV,EAAkB;AACrBT,QAAAA,OAAO,CAACC,GAAR,CAAYQ,MAAZ;AACH,OAXL;AAYH;;AACDN,IAAAA,WAAW;AACd;;AAED,MAAIO,OAAO,GAAGpC,UAAU,EAAxB;;AAEA,QAAMqC,QAAQ,GAAG,MAAM;AACnBD,IAAAA,OAAO,CAACE,IAAR,CAAa,OAAb;AACH,GAFD;;AAIA,MAAIjC,WAAW,KAAK,IAApB,EAA0B,oBAAQ,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,UAAR,CAA1B,KACK,oBACD;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACI;AAAK,QAAA,GAAG,EAAEd,IAAV;AAAgB,QAAA,GAAG,EAAE;AAArB;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,IAAD;AAAM,QAAA,SAAS,EAAC,eAAhB;AAAgC,QAAA,EAAE,EAAC,OAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI,QAAC,OAAD;AAAS,QAAA,EAAE,EAAC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII;AAAS,QAAA,OAAO,EAAE,MAAM8C,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAOI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAGK1B,OAAO,iBAAO,QAAC,eAAD;AAAiB,UAAA,SAAS,EAAC,MAA3B;AAAkC,UAAA,IAAI,EAAElB,KAAxC;AAA+C,UAAA,OAAO,EAAEmC;AAAxD;AAAA;AAAA;AAAA;AAAA,gBAHnB,EAIKhB,YAAY,iBAAM,QAAC,eAAD;AAAiB,UAAA,SAAS,EAAC,MAA3B;AAAkC,UAAA,IAAI,EAAEnB,KAAxC;AAA+C,UAAA,OAAO,EAAEmC;AAAxD;AAAA;AAAA;AAAA;AAAA,gBAJvB;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAQI;AAAA,kBAAIvB;AAAJ;AAAA;AAAA;AAAA;AAAA,cARJ,eASI,QAAC,aAAD;AACI,QAAA,KAAK,EAAC,oBADV;AAEI,QAAA,OAAO,EAAC,eAFZ;AAGI,QAAA,cAAc,EAAEA,WAHpB;AAII,QAAA,YAAY,EAAC,SAJjB;AAKI,QAAA,WAAW,EAAC,MALhB;AAMI,QAAA,IAAI,EAAEE,SANV;AAOI,QAAA,KAAK,EAAEsB,WAPX;AAQI,QAAA,UAAU,EAAEE,IARhB;AASI,QAAA,YAAY,EAAED;AATlB;AAAA;AAAA;AAAA;AAAA,cATJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADC;AA+BR;;GAlGQ1B,I;UA4DSJ,U;;;KA5DTI,I;AAkGR,eAAeA,IAAf","sourcesContent":["import Loader from \"../components/Loader\";\r\nimport logo from \"../public/logothedre.png\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faPen} from \"@fortawesome/free-solid-svg-icons\";\r\nimport ModalEditHome from \"../components/modal/ModalEditHome\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport Auth from \"../contexts/Auth\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport {Link, NavLink} from \"react-router-dom\";\r\n\r\nfunction Home() {\r\n    const [description, setDescription] = useState(null);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [newDescription, setNewDescription] = useState(null);\r\n    const {isAdmin, isSuperAdmin} = useContext(Auth);\r\n\r\n    function getHomeContent() {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        if (description === null) {\r\n            axios.get(url + '/Projet_TER/API/Controllers/accueil/lire.php')\r\n            // axios.get(url + '/API/Controllers/accueil/lire.php')\r\n                .then(response => {\r\n                    setDescription(response.data['description']);\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getHomeContent();\r\n    });\r\n\r\n\r\n    function handleOpen() {\r\n        setModalOpen(true);\r\n    }\r\n\r\n    function handleClose() {\r\n        setModalOpen(false);\r\n    }\r\n\r\n    function handleChange(description) {\r\n        setNewDescription(description);\r\n    }\r\n\r\n    function edit() {\r\n        if (newDescription !== null) {\r\n            let data = JSON.stringify({description: newDescription});\r\n            let protocol = window.location.protocol;\r\n            let host = window.location.hostname;\r\n            let url = protocol + '//' + host;\r\n            axios.put(url +'/Projet_TER/API/Controllers/accueil/modifier.php',data)\r\n                .then(() => {\r\n                    axios.get(url+ '/Projet_TER/API/Controllers/accueil/lire.php')\r\n                        .then(response => {\r\n                            setDescription(response.data['description']);\r\n                        })\r\n                        .catch(error => console.log(error))\r\n                    handleClose();\r\n                })\r\n                .catch(function (erreur) {\r\n                    console.log(erreur);\r\n                });\r\n        }\r\n        handleClose();\r\n    }\r\n\r\n    let history = useHistory();\r\n\r\n    const redirect = () => {\r\n        history.push('/quiz')\r\n    }\r\n\r\n    if (description === null) return (<Loader/>);\r\n    else return (\r\n        <div className=\"Home\">\r\n            <div className=\"logo\">\r\n                <img src={logo} alt={'Logo Thedre'}/>\r\n                <Link className=\"button filled\" to=\"/quiz\">Start</Link>\r\n                <NavLink to=\"/quiz\">About</NavLink>\r\n                <button  onClick={() => redirect}>Start</button>\r\n            </div>\r\n            <div className=\"content\">\r\n                <div className=\"title\">\r\n                    <h3>Contents</h3>\r\n                    {/*<FontAwesomeIcon className=\"icon\" icon={faPen} onClick={handleOpen}/>*/}\r\n                    {isAdmin  && ( <FontAwesomeIcon className=\"icon\" icon={faPen} onClick={handleOpen}/>)}\r\n                    {isSuperAdmin && ( <FontAwesomeIcon className=\"icon\" icon={faPen} onClick={handleOpen}/>)}\r\n                </div>\r\n\r\n                <p>{description}</p>\r\n                <ModalEditHome\r\n                    title=\"Modify description\"\r\n                    message=\"Please modify\"\r\n                    oldDescription={description}\r\n                    actionButton=\"Confirm\"\r\n                    closeButton=\"Quit\"\r\n                    open={modalOpen}\r\n                    close={handleClose}\r\n                    mainAction={edit}\r\n                    changeAction={handleChange}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}export default Home;"]},"metadata":{},"sourceType":"module"}
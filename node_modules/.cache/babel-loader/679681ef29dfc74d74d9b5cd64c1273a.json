{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\Projet_TER\\\\src\\\\views\\\\Quiz.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport Issues from '../components/quiz/issues';\nimport Historic from '../components/quiz/historic';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Quiz extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.changeData = (nextIssueId, decision = null, history = true) => {\n      // next issue ID in element\n      if (nextIssueId !== 0) {\n        let issue = this.state.tree.criteres.find(critere => critere.ID_Critere === nextIssueId);\n        let decisions = this.state.tree.decisions.filter(decision => decision.ID_Critere_entrant === issue.ID_Critere);\n        let oldIssue = this.state.currentIssue;\n        this.setState({\n          currentIssue: issue,\n          currentDecisions: decisions,\n          step: this.state.step + 1\n        }, () => {\n          if (history) {\n            this.manageHistoric(decision, oldIssue);\n          }\n        });\n      } else {\n        alert(\"fini\");\n      }\n    };\n\n    this.backOut = issueId => {\n      this.changeData(issueId, null, false);\n      let index = this.state.historic.indexOf(this.state.historic.find(el => el.issue.ID_Critere === issueId));\n      this.state.historic.length = index + 1;\n      this.state.historic[index].decision = null;\n      this.setState({\n        step: index + 1\n      }, () => console.log(this.state));\n    };\n\n    this.manageHistoric = (decision = null, oldIssue) => {\n      let condition = this.state.historic.find(el => el.issue.ID_Critere === oldIssue.ID_Critere);\n\n      if (condition) {\n        condition.decision = decision;\n      }\n\n      let historicElement = {\n        issue: this.state.currentIssue,\n        decision: null\n      };\n      this.setState({\n        historic: this.state.historic.concat(historicElement)\n      });\n    };\n\n    this.state = {\n      tree: null,\n      currentIssue: null,\n      currentDecisions: [],\n      historic: [],\n      step: 0\n    }; // this.componentDidMount = this.componentDidMount.bind(this);\n  }\n\n  componentDidMount() {\n    if (!this.state.tree) {\n      axios.get('C:\\\\wamp64\\\\www\\\\Projet_TER\\\\API\\\\Controllers\\\\lireArbre.php').then(response => {\n        this.setState({\n          tree: response.data\n        });\n        this.changeData(response.data.entree[0].ID_Critere);\n      }).catch(error => console.log(error));\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Quiz\",\n      children: [/*#__PURE__*/_jsxDEV(Issues, {\n        issue: this.state.currentIssue,\n        decisions: this.state.currentDecisions,\n        changeData: this.changeData,\n        step: this.state.step\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Historic, {\n        historic: this.state.historic,\n        backOut: this.backOut\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nexport default Quiz;","map":{"version":3,"sources":["C:/wamp64/www/Projet_TER/src/views/Quiz.js"],"names":["React","axios","Issues","Historic","Quiz","Component","constructor","props","changeData","nextIssueId","decision","history","issue","state","tree","criteres","find","critere","ID_Critere","decisions","filter","ID_Critere_entrant","oldIssue","currentIssue","setState","currentDecisions","step","manageHistoric","alert","backOut","issueId","index","historic","indexOf","el","length","console","log","condition","historicElement","concat","componentDidMount","get","then","response","data","entree","catch","error","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\n\r\nimport Issues from '../components/quiz/issues';\r\nimport Historic from '../components/quiz/historic';\r\n\r\nexport class Quiz extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tree : null,\r\n            currentIssue: null,\r\n            currentDecisions: [],\r\n            historic: [],\r\n            step: 0,\r\n        };\r\n        // this.componentDidMount = this.componentDidMount.bind(this);\r\n    }\r\n\r\n    changeData = (nextIssueId, decision = null, history = true) => {\r\n        // next issue ID in element\r\n        if(nextIssueId !== 0){\r\n            let issue = this.state.tree.criteres.find(critere => critere.ID_Critere === nextIssueId);\r\n            let decisions =  this.state.tree.decisions.filter(decision => decision.ID_Critere_entrant === issue.ID_Critere);\r\n            let oldIssue = this.state.currentIssue;\r\n            this.setState({\r\n                currentIssue: issue,\r\n                currentDecisions: decisions,\r\n                step: this.state.step + 1\r\n            }, () => {if(history){this.manageHistoric(decision, oldIssue)}});\r\n        }else {\r\n            alert(\"fini\");\r\n        }\r\n    }\r\n\r\n    backOut = (issueId) => {\r\n        this.changeData(issueId, null, false);\r\n        let index =  this.state.historic.indexOf(this.state.historic.find(el => el.issue.ID_Critere === issueId));\r\n        this.state.historic.length = index + 1;\r\n        this.state.historic[index].decision = null;\r\n        this.setState({step: index + 1}, () =>  console.log(this.state));\r\n    }\r\n\r\n    manageHistoric = (decision = null, oldIssue) => {\r\n            let condition = this.state.historic.find(el => el.issue.ID_Critere === oldIssue.ID_Critere);\r\n            if(condition){condition.decision = decision;}\r\n            let historicElement = {\r\n                issue: this.state.currentIssue,\r\n                decision: null\r\n            }\r\n            this.setState({historic: this.state.historic.concat(historicElement)});\r\n        \r\n    }\r\n\r\n    componentDidMount(){\r\n        if(!this.state.tree){\r\n            axios.get('C:\\\\wamp64\\\\www\\\\Projet_TER\\\\API\\\\Controllers\\\\lireArbre.php')\r\n            .then(response => {\r\n                this.setState({tree: response.data});\r\n                this.changeData(response.data.entree[0].ID_Critere);\r\n            })\r\n            .catch(error => console.log(error))\r\n        }\r\n    };\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"Quiz\">\r\n                <Issues issue={this.state.currentIssue} \r\n                    decisions={this.state.currentDecisions} \r\n                    changeData={this.changeData}\r\n                    step={this.state.step}\r\n                />\r\n                <Historic historic={this.state.historic} \r\n                    backOut={this.backOut}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Quiz;\r\n"]},"metadata":{},"sourceType":"module"}
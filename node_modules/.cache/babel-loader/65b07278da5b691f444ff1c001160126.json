{"ast":null,"code":"import _slicedToArray from\"C:/wamp64/www/Projet_TER/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from'axios';import{useHistory}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),mail=_useState4[0],setMail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),passwordConfirmation=_useState8[0],setPasswordConfirmation=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorPseudo=_useState10[0],setErrorPseudo=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),errorMail=_useState12[0],setErrorMail=_useState12[1];var history=useHistory();function register(){var protocol=window.location.protocol;var host=window.location.hostname;var url=protocol+'//'+host;if(username!==\"\"&&mail!==\"\"&&password!==\"\"&&passwordConfirmation!==\"\"&&password===passwordConfirmation){var json=JSON.stringify({mail:mail,pseudo:username,mot_de_passe:password});axios.post(url+'/API/Controllers/utilisateur/creerUtilisateur.php',json)// axios.post(url + '/API/Controllers/connexion.php', json)\n.then(function(response){if(response.data.ErrorPseudo){setErrorPseudo(response.data.ErrorPseudo);}else if(response.data.ErrorMail){setErrorMail(response.data.ErrorMail);}else{history.push({pathname:\"/login\"});}}).catch(function(error){return console.log(error);});}}return/*#__PURE__*/_jsx(\"div\",{className:\"LoginRegister\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sign up\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"InputItems\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",required:true,placeholder:\"\\uF007     Username\",onChange:function onChange(e){return setUsername(e.target.value);}}),errorPseudo&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errorPseudo})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"mail\",id:\"mail\",name:\"mail\",required:true,placeholder:\"\\uF0E0     Mail\",onChange:function onChange(e){return setMail(e.target.value);}}),errorMail&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errorMail})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",required:true,placeholder:\"\\uF023     Password\",onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"passwordConfirmation\",name:\"passwordConfirmation\",required:true,placeholder:\"     Confirm password\",onChange:function onChange(e){return setPasswordConfirmation(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"action\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button filled\",onClick:register,children:\"Sign up\"})})]})});}export default Register;","map":{"version":3,"sources":["C:/wamp64/www/Projet_TER/src/views/Register.js"],"names":["React","useEffect","useState","axios","useHistory","Register","username","setUsername","mail","setMail","password","setPassword","passwordConfirmation","setPasswordConfirmation","errorPseudo","setErrorPseudo","errorMail","setErrorMail","history","register","protocol","window","location","host","hostname","url","json","JSON","stringify","pseudo","mot_de_passe","post","then","response","data","ErrorPseudo","ErrorMail","push","pathname","catch","error","console","log","e","target","value"],"mappings":"+IAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,cAA3B,C,wFAEA,QAASC,CAAAA,QAAT,EAAoB,CAChB,cAAgCH,QAAQ,CAAC,EAAD,CAAxC,wCAAOI,QAAP,eAAiBC,WAAjB,eACA,eAAwBL,QAAQ,CAAC,EAAD,CAAhC,yCAAOM,IAAP,eAAaC,OAAb,eACA,eAAgCP,QAAQ,CAAC,EAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAAwDT,QAAQ,CAAC,EAAD,CAAhE,yCAAOU,oBAAP,eAA6BC,uBAA7B,eACA,eAAqCX,QAAQ,CAAC,IAAD,CAA7C,0CAAOY,WAAP,gBAAoBC,cAApB,gBACA,gBAAiCb,QAAQ,CAAC,IAAD,CAAzC,2CAAOc,SAAP,gBAAkBC,YAAlB,gBACA,GAAMC,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CAEC,QAASe,CAAAA,QAAT,EAAoB,CACjB,GAAIC,CAAAA,QAAQ,CAAGC,MAAM,CAACC,QAAP,CAAgBF,QAA/B,CACA,GAAIG,CAAAA,IAAI,CAAGF,MAAM,CAACC,QAAP,CAAgBE,QAA3B,CACA,GAAIC,CAAAA,GAAG,CAAGL,QAAQ,CAAG,IAAX,CAAkBG,IAA5B,CAEA,GAAIjB,QAAQ,GAAK,EAAb,EAAmBE,IAAI,GAAK,EAA5B,EAAkCE,QAAQ,GAAK,EAA/C,EAAqDE,oBAAoB,GAAK,EAA9E,EAAoFF,QAAQ,GAAKE,oBAArG,CAA2H,CACvH,GAAMc,CAAAA,IAAI,CAAGC,IAAI,CAACC,SAAL,CAAe,CAACpB,IAAI,CAAEA,IAAP,CAAaqB,MAAM,CAAEvB,QAArB,CAA+BwB,YAAY,CAAEpB,QAA7C,CAAf,CAAb,CACAP,KAAK,CAAC4B,IAAN,CAAWN,GAAG,CAAG,mDAAjB,CAAsEC,IAAtE,CACI;AADJ,CAEKM,IAFL,CAEU,SAAAC,QAAQ,CAAI,CACd,GAAGA,QAAQ,CAACC,IAAT,CAAcC,WAAjB,CAA6B,CACzBpB,cAAc,CAACkB,QAAQ,CAACC,IAAT,CAAcC,WAAf,CAAd,CACH,CAFD,IAGK,IAAGF,QAAQ,CAACC,IAAT,CAAcE,SAAjB,CAA2B,CAC5BnB,YAAY,CAACgB,QAAQ,CAACC,IAAT,CAAcE,SAAf,CAAZ,CACH,CAFI,IAGA,CACDlB,OAAO,CAACmB,IAAR,CAAa,CACTC,QAAQ,CAAG,QADF,CAAb,EAGH,CACJ,CAdL,EAeKC,KAfL,CAeW,SAAAC,KAAK,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAJ,EAfhB,EAgBH,CACJ,CAED,mBACI,YAAK,SAAS,CAAC,eAAf,uBACI,oCACI,+BADJ,cAEI,aAAK,SAAS,CAAC,YAAf,wBACI,oCACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,UAAtB,CAAiC,IAAI,CAAC,UAAtC,CAAiD,QAAQ,KAAzD,CAA0D,WAAW,CAAC,qBAAtE,CACO,QAAQ,CAAE,kBAAAG,CAAC,QAAIpC,CAAAA,WAAW,CAACoC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EADlB,EADJ,CAGK/B,WAAW,eAAI,UAAG,SAAS,CAAC,OAAb,UAAsBA,WAAtB,EAHpB,GADJ,cAMI,oCACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,MAAtB,CAA6B,IAAI,CAAC,MAAlC,CAAyC,QAAQ,KAAjD,CAAkD,WAAW,CAAC,iBAA9D,CACO,QAAQ,CAAE,kBAAA6B,CAAC,QAAIlC,CAAAA,OAAO,CAACkC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,EADlB,EADJ,CAGK7B,SAAS,eAAI,UAAG,SAAS,CAAC,OAAb,UAAsBA,SAAtB,EAHlB,GANJ,cAWI,kCACI,cAAO,IAAI,CAAC,UAAZ,CAAuB,EAAE,CAAC,UAA1B,CAAqC,IAAI,CAAC,UAA1C,CAAqD,QAAQ,KAA7D,CAA8D,WAAW,CAAC,qBAA1E,CACO,QAAQ,CAAE,kBAAA2B,CAAC,QAAIhC,CAAAA,WAAW,CAACgC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EADlB,EADJ,EAXJ,cAgBI,kCACI,cAAO,IAAI,CAAC,UAAZ,CAAuB,EAAE,CAAC,sBAA1B,CAAiD,IAAI,CAAC,sBAAtD,CAA6E,QAAQ,KAArF,CACO,WAAW,CAAE,wBADpB,CAEO,QAAQ,CAAE,kBAAAF,CAAC,QAAI9B,CAAAA,uBAAuB,CAAC8B,CAAC,CAACC,MAAF,CAASC,KAAV,CAA3B,EAFlB,EADJ,EAhBJ,GAFJ,cAyBI,YAAK,SAAS,CAAC,QAAf,uBACI,eAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAE1B,QAA3C,qBADJ,EAzBJ,GADJ,EADJ,CAkCH,CAED,cAAed,CAAAA,QAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport { useHistory } from \"react-router\";\r\n\r\nfunction Register() {\r\n    const [username, setUsername] = useState(\"\");\r\n    const [mail, setMail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\r\n    const [errorPseudo, setErrorPseudo] =useState(null);\r\n    const [errorMail, setErrorMail] =useState(null);\r\n    const history = useHistory();\r\n\r\n     function register() {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        if (username !== \"\" && mail !== \"\" && password !== \"\" && passwordConfirmation !== \"\" && password === passwordConfirmation) {\r\n            const json = JSON.stringify({mail: mail, pseudo: username, mot_de_passe: password});\r\n            axios.post(url + '/API/Controllers/utilisateur/creerUtilisateur.php', json)\r\n                // axios.post(url + '/API/Controllers/connexion.php', json)\r\n                .then(response => {\r\n                    if(response.data.ErrorPseudo){\r\n                        setErrorPseudo(response.data.ErrorPseudo);\r\n                    }\r\n                    else if(response.data.ErrorMail){\r\n                        setErrorMail(response.data.ErrorMail);\r\n                    }\r\n                    else {\r\n                        history.push({\r\n                            pathname:  \"/login\",\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"LoginRegister\">\r\n            <div>\r\n                <h3>Sign up</h3>\r\n                <div className=\"InputItems\">\r\n                    <div>\r\n                        <input type=\"text\" id=\"username\" name=\"username\" required placeholder=\"     Username\"\r\n                               onChange={e => setUsername(e.target.value)}/>\r\n                        {errorPseudo &&(<p className=\"error\">{errorPseudo}</p>)}\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"mail\" id=\"mail\" name=\"mail\" required placeholder=\"     Mail\"\r\n                               onChange={e => setMail(e.target.value)}/>\r\n                        {errorMail &&(<p className=\"error\">{errorMail}</p>)}\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"password\" id=\"password\" name=\"password\" required placeholder=\"     Password\"\r\n                               onChange={e => setPassword(e.target.value)}/>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <input type=\"password\" id=\"passwordConfirmation\" name=\"passwordConfirmation\" required\r\n                               placeholder={\"     Confirm password\"}\r\n                               onChange={e => setPasswordConfirmation(e.target.value)}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"action\">\r\n                    <button className=\"button filled\" onClick={register}>Sign up</button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}
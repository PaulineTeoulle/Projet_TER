{"ast":null,"code":"import axios from 'axios';\nimport jwtDecode from \"jwt-decode\";\nimport { getItem, addItem, removeItem } from \"./LocalStorage\";\nexport function hasAuthenticated() {\n  const token = getItem('token');\n  const tokenIsValid = token ? tokenIsValid(token) : false;\n\n  if (false === tokenIsValid) {\n    removeItem('token');\n  }\n\n  return tokenIsValid;\n}\nexport function login(credentials) {\n  let protocol = window.location.protocol;\n  let host = window.location.hostname;\n  let url = protocol + '//' + host;\n  const json = JSON.stringify(credentials);\n  return axios.post(url + '/Projet_TER/API/Controllers/connexion.php', json) // axios.post(url + '/reactTest/MATUI/API/Controllers/connexion.php', json)\n  .then(response => response.data).catch(error => console.log(error)); // return axios.post('http://localhost:80/Projet_TER/API/Controllers/connexion.php', credentials).then(response =>response);\n}\nexport function logout() {\n  removeItem('token');\n}\n\nfunction tokenIsValid(token) {\n  const {\n    exp\n  } = jwtDecode(token);\n  return exp * 1000 > new Date().getTime();\n}","map":{"version":3,"sources":["C:/wamp64/www/Projet_TER/src/services/AuthApi.js"],"names":["axios","jwtDecode","getItem","addItem","removeItem","hasAuthenticated","token","tokenIsValid","login","credentials","protocol","window","location","host","hostname","url","json","JSON","stringify","post","then","response","data","catch","error","console","log","logout","exp","Date","getTime"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAAQC,OAAR,EAAiBC,OAAjB,EAA0BC,UAA1B,QAA2C,gBAA3C;AAEA,OAAO,SAASC,gBAAT,GAA4B;AAC/B,QAAMC,KAAK,GAAGJ,OAAO,CAAC,OAAD,CAArB;AACA,QAAMK,YAAY,GAAGD,KAAK,GAAGC,YAAY,CAACD,KAAD,CAAf,GAAwB,KAAlD;;AAEA,MAAG,UAAUC,YAAb,EAA0B;AACtBH,IAAAA,UAAU,CAAC,OAAD,CAAV;AACH;;AACD,SAAOG,YAAP;AACH;AAGD,OAAO,SAAUC,KAAV,CAAgBC,WAAhB,EAA4B;AAC/B,MAAIC,QAAQ,GAAGC,MAAM,CAACC,QAAP,CAAgBF,QAA/B;AACA,MAAIG,IAAI,GAAGF,MAAM,CAACC,QAAP,CAAgBE,QAA3B;AACA,MAAIC,GAAG,GAAGL,QAAQ,GAAG,IAAX,GAAkBG,IAA5B;AACA,QAAMG,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeT,WAAf,CAAb;AACD,SAAOT,KAAK,CAACmB,IAAN,CAAWJ,GAAG,GAAG,2CAAjB,EAA8DC,IAA9D,EACF;AADE,GAEDI,IAFC,CAEIC,QAAQ,IAAGA,QAAQ,CAACC,IAFxB,EAIDC,KAJC,CAIKC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAJd,CAAP,CALgC,CAU/B;AACH;AAED,OAAO,SAASG,MAAT,GAAiB;AACpBvB,EAAAA,UAAU,CAAC,OAAD,CAAV;AAEH;;AAED,SAASG,YAAT,CAAsBD,KAAtB,EAA4B;AACxB,QAAM;AAACsB,IAAAA;AAAD,MAAQ3B,SAAS,CAACK,KAAD,CAAvB;AAEA,SAAOsB,GAAG,GAAG,IAAN,GAAa,IAAIC,IAAJ,GAAWC,OAAX,EAApB;AAEH","sourcesContent":["import axios from 'axios';\r\nimport jwtDecode from \"jwt-decode\";\r\nimport {getItem, addItem, removeItem} from \"./LocalStorage\";\r\n\r\nexport function hasAuthenticated() {\r\n    const token = getItem('token');\r\n    const tokenIsValid = token ? tokenIsValid(token): false;\r\n\r\n    if(false === tokenIsValid){\r\n        removeItem('token');\r\n    }\r\n    return tokenIsValid;\r\n}\r\n\r\n\r\nexport function  login(credentials){\r\n    let protocol = window.location.protocol;\r\n    let host = window.location.hostname;\r\n    let url = protocol + '//' + host;\r\n    const json = JSON.stringify(credentials);\r\n   return axios.post(url + '/Projet_TER/API/Controllers/connexion.php', json)\r\n        // axios.post(url + '/reactTest/MATUI/API/Controllers/connexion.php', json)\r\n        .then(response =>response.data\r\n        )\r\n        .catch(error => console.log(error));\r\n    // return axios.post('http://localhost:80/Projet_TER/API/Controllers/connexion.php', credentials).then(response =>response);\r\n}\r\n\r\nexport function logout(){\r\n    removeItem('token');\r\n\r\n}\r\n\r\nfunction tokenIsValid(token){\r\n    const {exp} = jwtDecode(token);\r\n\r\n    return exp * 1000 > new Date().getTime();\r\n\r\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"C:/wamp64/www/Projet_TER/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/wamp64/www/Projet_TER/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/wamp64/www/Projet_TER/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/wamp64/www/Projet_TER/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/wamp64/www/Projet_TER/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Loader from'../components/Loader';import logo from'../public/logothedre.png';import axios from\"axios\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPen}from\"@fortawesome/free-solid-svg-icons\";import ModalEditHome from\"../components/modal/ModalEditHome\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=/*#__PURE__*/function(_React$Component){_inherits(Home,_React$Component);var _super=_createSuper(Home);// Tell webpack this JS file uses this image\nfunction Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.handleClose=function(){_this.setState({modalOpen:false});};_this.state={description:null,modalOpen:false,newDescription:null};_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.edit=_this.edit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleClose=_this.handleClose.bind(_assertThisInitialized(_this));_this.handleOpen=_this.handleOpen.bind(_assertThisInitialized(_this));return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var protocol=window.location.protocol;var host=window.location.hostname;var url=protocol+'//'+host;if(this.state.description===null){axios.get(url+'/Projet_TER/API/Controllers/accueil/lire.php').then(function(response){_this2.setState({description:response.data['description']});}).catch(function(error){return console.log(error);});}}},{key:\"handleOpen\",value:function handleOpen(){this.setState({modalOpen:true});}},{key:\"handleChange\",value:function handleChange(description){this.setState({newDescription:description});}},{key:\"edit\",value:function edit(){var _this3=this;if(this.state.newDescription!==null){var data=JSON.stringify({description:this.state.newDescription});axios({method:'put',url:'http://localhost/Projet_TER/API/Controllers/accueil/modifier.php',data:data}).then(function(response){axios.get('http://localhost/Projet_TER/API/Controllers/accueil/lire.php').then(function(response){_this3.setState({description:response.data['description']});}).catch(function(error){return console.log(error);});_this3.handleClose();}).catch(function(erreur){console.log(erreur);});}this.handleClose();}},{key:\"render\",value:function render(){if(this.state.description===null)return/*#__PURE__*/_jsx(Loader,{});else return/*#__PURE__*/_jsxs(\"div\",{className:\"Home\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:'Logo Thedre'}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return window.location.href='/quiz';},className:\"button filled\",children:\"Start\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\" Contents \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPen,onClick:this.handleOpen})]}),/*#__PURE__*/_jsx(ModalEditHome,{title:\"Modify description\",message:\"Please modify\",oldDescription:this.state.description,actionButton:\"Confirm\",closeButton:\"Quit\",open:this.state.modalOpen,close:this.handleClose,mainAction:this.edit.bind(this),changeAction:this.handleChange.bind(this)}),/*#__PURE__*/_jsx(\"p\",{children:this.state.description})]})]});}}]);return Home;}(React.Component);export{Home as default};","map":{"version":3,"sources":["C:/wamp64/www/Projet_TER/src/views/Home.js"],"names":["React","Loader","logo","axios","FontAwesomeIcon","faPen","ModalEditHome","Home","props","handleClose","setState","modalOpen","state","description","newDescription","componentDidMount","bind","edit","handleChange","handleOpen","protocol","window","location","host","hostname","url","get","then","response","data","catch","error","console","log","JSON","stringify","method","erreur","href","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Loader from '../components/Loader'\r\nimport logo from '../public/logothedre.png';\r\nimport axios from \"axios\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faPen} from \"@fortawesome/free-solid-svg-icons\";\r\nimport ModalEditHome from \"../components/modal/ModalEditHome\";\r\n\r\nexport default class Home extends React.Component { // Tell webpack this JS file uses this image\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            description: null,\r\n            modalOpen: false,\r\n            newDescription: null,\r\n\r\n        }\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.edit = this.edit.bind(this);\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleOpen = this.handleOpen.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        if (this.state.description === null) {\r\n            axios.get(url + '/Projet_TER/API/Controllers/accueil/lire.php')\r\n                .then(response => {\r\n                    this.setState({description: response.data['description']});\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    };\r\n\r\n    handleOpen() {\r\n        this.setState({modalOpen: true});\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({modalOpen: false});\r\n    };\r\n\r\n    handleChange(description) {\r\n        this.setState({newDescription: description});\r\n    };\r\n\r\n    edit() {\r\n        if (this.state.newDescription !== null) {\r\n            let data = JSON.stringify({description: this.state.newDescription});\r\n            axios({\r\n                method: 'put',\r\n                url: 'http://localhost/Projet_TER/API/Controllers/accueil/modifier.php',\r\n                data: data\r\n            })\r\n                .then(response => {\r\n                    axios.get('http://localhost/Projet_TER/API/Controllers/accueil/lire.php')\r\n                        .then(response => {\r\n                            this.setState({description: response.data['description']});\r\n                        })\r\n                        .catch(error => console.log(error))\r\n                    this.handleClose();\r\n                })\r\n                .catch(function (erreur) {\r\n                    console.log(erreur);\r\n                });\r\n\r\n        }\r\n        this.handleClose();\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.state.description === null) return (<Loader/>);\r\n        else return (\r\n            <div className=\"Home\">\r\n                <div className=\"logo\">\r\n                    <img src={logo} alt={'Logo Thedre'}/>\r\n                    <button onClick={() => window.location.href = '/quiz'} className=\"button filled\">Start</button>\r\n                </div>\r\n                <div className=\"content\">\r\n                    <h3> Contents <FontAwesomeIcon icon={faPen} onClick={this.handleOpen}/></h3>\r\n                    <ModalEditHome\r\n                        title=\"Modify description\"\r\n                        message=\"Please modify\"\r\n                        oldDescription={this.state.description}\r\n                        actionButton=\"Confirm\"\r\n                        closeButton=\"Quit\"\r\n                        open={this.state.modalOpen}\r\n                        close={this.handleClose}\r\n                        mainAction={this.edit.bind(this)}\r\n                        changeAction={this.handleChange.bind(this)}\r\n                    />\r\n                    <p>{this.state.description}</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}
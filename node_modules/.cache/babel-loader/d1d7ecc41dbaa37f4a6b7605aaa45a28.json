{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\Projet_TER\\\\src\\\\views\\\\Home2.js\",\n    _s = $RefreshSig$();\n\nimport Loader from \"../components/Loader\";\nimport logo from \"../public/logothedre.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPen } from \"@fortawesome/free-solid-svg-icons\";\nimport ModalEditHome from \"../components/modal/ModalEditHome\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Auth from \"../contexts/Auth\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home2(props) {\n  _s();\n\n  const [description, setDescription] = useState(null);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [newDescription, setNewDescription] = useState(null);\n  const {\n    isAuthenticated,\n    setIsAuthenticated\n  } = useContext(Auth);\n  const {\n    isUser,\n    setIsUser\n  } = useContext(Auth);\n  const {\n    isAdmin,\n    setIsAdmin\n  } = useContext(Auth);\n  const {\n    isSuperAdmin,\n    setIsSuperAdmin\n  } = useContext(Auth);\n\n  function getHomeContent() {\n    let protocol = window.location.protocol;\n    let host = window.location.hostname;\n    let url = protocol + '//' + host;\n\n    if (description === null) {\n      axios.get(url + '/Projet_TER/API/Controllers/accueil/lire.php').then(response => {\n        this.setState({\n          description: response.data['description']\n        });\n      }).catch(error => console.log(error));\n    }\n  }\n\n  useEffect(() => {\n    getHomeContent();\n  }, []);\n\n  function handleOpen() {\n    setModalOpen(true);\n  }\n\n  function handleClose() {\n    setModalOpen(false);\n  }\n\n  function handleChange(description) {\n    setNewDescription(description);\n  }\n\n  function edit() {\n    if (newDescription !== null) {\n      let data = JSON.stringify({\n        description: newDescription\n      });\n      axios({\n        method: 'put',\n        url: 'http://localhost/Projet_TER/API/Controllers/accueil/modifier.php',\n        data: data\n      }).then(response => {\n        axios.get('http://localhost/Projet_TER/API/Controllers/accueil/lire.php').then(response => {\n          setDescription(response.data['description']);\n        }).catch(error => console.log(error));\n        handleClose();\n      }).catch(function (erreur) {\n        console.log(erreur);\n      });\n    }\n\n    handleClose();\n  }\n\n  if (description === null) return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 39\n  }, this);else return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Home\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logo\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: 'Logo Thedre'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button filled\",\n        onClick: () => window.location.href = '/quiz',\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Contents\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          className: \"icon\",\n          icon: faPen,\n          onClick: handleOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalEditHome, {\n        title: \"Modify description\",\n        message: \"Please modify\",\n        oldDescription: description,\n        actionButton: \"Confirm\",\n        closeButton: \"Quit\",\n        open: modalOpen,\n        close: handleClose,\n        mainAction: edit,\n        changeAction: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Home2, \"9L30Q982v36nFj1Al0gtYdl2jZU=\");\n\n_c = Home2;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home2\");","map":{"version":3,"sources":["C:/wamp64/www/Projet_TER/src/views/Home2.js"],"names":["Loader","logo","FontAwesomeIcon","faPen","ModalEditHome","React","useContext","useEffect","useState","Auth","axios","Home2","props","description","setDescription","modalOpen","setModalOpen","newDescription","setNewDescription","isAuthenticated","setIsAuthenticated","isUser","setIsUser","isAdmin","setIsAdmin","isSuperAdmin","setIsSuperAdmin","getHomeContent","protocol","window","location","host","hostname","url","get","then","response","setState","data","catch","error","console","log","handleOpen","handleClose","handleChange","edit","JSON","stringify","method","erreur","href"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AACA,SAAQC,eAAR,QAA8B,gCAA9B;AACA,SAAQC,KAAR,QAAoB,mCAApB;AACA,OAAOC,aAAP,MAA0B,mCAA1B;AACA,OAAOC,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AAAA;;AAClB,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCN,QAAQ,CAAC,IAAD,CAA9C;AACA,QAAM,CAACO,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACS,cAAD,EAAiBC,iBAAjB,IAAsCV,QAAQ,CAAC,IAAD,CAApD;AACA,QAAM;AAACW,IAAAA,eAAD;AAAkBC,IAAAA;AAAlB,MAAwCd,UAAU,CAACG,IAAD,CAAxD;AACA,QAAM;AAACY,IAAAA,MAAD;AAASC,IAAAA;AAAT,MAAsBhB,UAAU,CAACG,IAAD,CAAtC;AACA,QAAM;AAACc,IAAAA,OAAD;AAAUC,IAAAA;AAAV,MAAwBlB,UAAU,CAACG,IAAD,CAAxC;AACA,QAAM;AAACgB,IAAAA,YAAD;AAAeC,IAAAA;AAAf,MAAkCpB,UAAU,CAACG,IAAD,CAAlD;;AAGA,WAASkB,cAAT,GAA0B;AACtB,QAAIC,QAAQ,GAAGC,MAAM,CAACC,QAAP,CAAgBF,QAA/B;AACA,QAAIG,IAAI,GAAGF,MAAM,CAACC,QAAP,CAAgBE,QAA3B;AACA,QAAIC,GAAG,GAAGL,QAAQ,GAAG,IAAX,GAAkBG,IAA5B;;AAEA,QAAIlB,WAAW,KAAK,IAApB,EAA0B;AACtBH,MAAAA,KAAK,CAACwB,GAAN,CAAUD,GAAG,GAAG,8CAAhB,EACKE,IADL,CACUC,QAAQ,IAAI;AACd,aAAKC,QAAL,CAAc;AAACxB,UAAAA,WAAW,EAAEuB,QAAQ,CAACE,IAAT,CAAc,aAAd;AAAd,SAAd;AACH,OAHL,EAIKC,KAJL,CAIWC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAJpB;AAKH;AACJ;;AAEDjC,EAAAA,SAAS,CAAC,MAAM;AACZoB,IAAAA,cAAc;AACjB,GAFQ,EAEN,EAFM,CAAT;;AAKA,WAASgB,UAAT,GAAsB;AAClB3B,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AAED,WAAS4B,WAAT,GAAuB;AACnB5B,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;;AAED,WAAS6B,YAAT,CAAsBhC,WAAtB,EAAmC;AAC/BK,IAAAA,iBAAiB,CAACL,WAAD,CAAjB;AACH;;AAED,WAASiC,IAAT,GAAgB;AACZ,QAAI7B,cAAc,KAAK,IAAvB,EAA6B;AACzB,UAAIqB,IAAI,GAAGS,IAAI,CAACC,SAAL,CAAe;AAACnC,QAAAA,WAAW,EAAEI;AAAd,OAAf,CAAX;AACAP,MAAAA,KAAK,CAAC;AACFuC,QAAAA,MAAM,EAAE,KADN;AAEFhB,QAAAA,GAAG,EAAE,kEAFH;AAGFK,QAAAA,IAAI,EAAEA;AAHJ,OAAD,CAAL,CAKKH,IALL,CAKUC,QAAQ,IAAI;AACd1B,QAAAA,KAAK,CAACwB,GAAN,CAAU,8DAAV,EACKC,IADL,CACUC,QAAQ,IAAI;AACdtB,UAAAA,cAAc,CAACsB,QAAQ,CAACE,IAAT,CAAc,aAAd,CAAD,CAAd;AACH,SAHL,EAIKC,KAJL,CAIWC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAJpB;AAKAI,QAAAA,WAAW;AACd,OAZL,EAaKL,KAbL,CAaW,UAAUW,MAAV,EAAkB;AACrBT,QAAAA,OAAO,CAACC,GAAR,CAAYQ,MAAZ;AACH,OAfL;AAgBH;;AACDN,IAAAA,WAAW;AAEd;;AAED,MAAI/B,WAAW,KAAK,IAApB,EAA0B,oBAAQ,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,UAAR,CAA1B,KACK,oBACD;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACI;AAAK,QAAA,GAAG,EAAEZ,IAAV;AAAgB,QAAA,GAAG,EAAE;AAArB;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAQ,QAAA,SAAS,EAAC,eAAlB;AAAkC,QAAA,OAAO,EAAE,MAAM4B,MAAM,CAACC,QAAP,CAAgBqB,IAAhB,GAAuB,OAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAKI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI,QAAC,eAAD;AAAiB,UAAA,SAAS,EAAC,MAA3B;AAAkC,UAAA,IAAI,EAAEhD,KAAxC;AAA+C,UAAA,OAAO,EAAEwC;AAAxD;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAMI;AAAA,kBAAI9B;AAAJ;AAAA;AAAA;AAAA;AAAA,cANJ,eAOI,QAAC,aAAD;AACI,QAAA,KAAK,EAAC,oBADV;AAEI,QAAA,OAAO,EAAC,eAFZ;AAGI,QAAA,cAAc,EAAEA,WAHpB;AAII,QAAA,YAAY,EAAC,SAJjB;AAKI,QAAA,WAAW,EAAC,MALhB;AAMI,QAAA,IAAI,EAAEE,SANV;AAOI,QAAA,KAAK,EAAE6B,WAPX;AAQI,QAAA,UAAU,EAAEE,IARhB;AASI,QAAA,YAAY,EAAED;AATlB;AAAA;AAAA;AAAA;AAAA,cAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,YALJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADC;AA2BR;;GA7FQlC,K;;KAAAA,K","sourcesContent":["import Loader from \"../components/Loader\";\r\nimport logo from \"../public/logothedre.png\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faPen} from \"@fortawesome/free-solid-svg-icons\";\r\nimport ModalEditHome from \"../components/modal/ModalEditHome\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport Auth from \"../contexts/Auth\";\r\nimport axios from \"axios\";\r\n\r\nfunction Home2(props) {\r\n    const [description, setDescription] = useState(null);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [newDescription, setNewDescription] = useState(null);\r\n    const {isAuthenticated, setIsAuthenticated} = useContext(Auth);\r\n    const {isUser, setIsUser} = useContext(Auth);\r\n    const {isAdmin, setIsAdmin} = useContext(Auth);\r\n    const {isSuperAdmin, setIsSuperAdmin} = useContext(Auth);\r\n\r\n\r\n    function getHomeContent() {\r\n        let protocol = window.location.protocol;\r\n        let host = window.location.hostname;\r\n        let url = protocol + '//' + host;\r\n\r\n        if (description === null) {\r\n            axios.get(url + '/Projet_TER/API/Controllers/accueil/lire.php')\r\n                .then(response => {\r\n                    this.setState({description: response.data['description']});\r\n                })\r\n                .catch(error => console.log(error))\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getHomeContent();\r\n    }, []);\r\n\r\n\r\n    function handleOpen() {\r\n        setModalOpen(true);\r\n    }\r\n\r\n    function handleClose() {\r\n        setModalOpen(false);\r\n    }\r\n\r\n    function handleChange(description) {\r\n        setNewDescription(description);\r\n    }\r\n\r\n    function edit() {\r\n        if (newDescription !== null) {\r\n            let data = JSON.stringify({description: newDescription});\r\n            axios({\r\n                method: 'put',\r\n                url: 'http://localhost/Projet_TER/API/Controllers/accueil/modifier.php',\r\n                data: data\r\n            })\r\n                .then(response => {\r\n                    axios.get('http://localhost/Projet_TER/API/Controllers/accueil/lire.php')\r\n                        .then(response => {\r\n                            setDescription(response.data['description']);\r\n                        })\r\n                        .catch(error => console.log(error))\r\n                    handleClose();\r\n                })\r\n                .catch(function (erreur) {\r\n                    console.log(erreur);\r\n                });\r\n        }\r\n        handleClose();\r\n\r\n    }\r\n\r\n    if (description === null) return (<Loader/>);\r\n    else return (\r\n        <div className=\"Home\">\r\n            <div className=\"logo\">\r\n                <img src={logo} alt={'Logo Thedre'}/>\r\n                <button className=\"button filled\" onClick={() => window.location.href = '/quiz'}>Start</button>\r\n            </div>\r\n            <div className=\"content\">\r\n                <div className=\"title\">\r\n                    <h3>Contents</h3>\r\n                    <FontAwesomeIcon className=\"icon\" icon={faPen} onClick={handleOpen}/>\r\n                </div>\r\n\r\n                <p>{description}</p>\r\n                <ModalEditHome\r\n                    title=\"Modify description\"\r\n                    message=\"Please modify\"\r\n                    oldDescription={description}\r\n                    actionButton=\"Confirm\"\r\n                    closeButton=\"Quit\"\r\n                    open={modalOpen}\r\n                    close={handleClose}\r\n                    mainAction={edit}\r\n                    changeAction={handleChange}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}